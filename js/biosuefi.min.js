
function deleteCookie(a){var b=new Date;b.setTime(b.getTime()-86400000),setCookie(a,"",b)}function getCookie(a){var b=a+"=";if(0<document.cookie.length)return offset=document.cookie.indexOf(b),-1==offset?"":(offset+=b.length,end=document.cookie.indexOf(";",offset),-1==end&&(end=document.cookie.length),unescape(document.cookie.substring(offset,end)))}function setCookie(a,b){var c=setCookie.arguments,d=setCookie.arguments.length,e=2<d?c[2]:null;if(null!=e){var f=new Date;f.setTime(f.getTime()+24*(3600*(1e3*e)))}document.cookie=a+"="+escape(b)+(null==e?"":"; expires="+f.toGMTString())}var xmlhttp=!1;function createHttpRequest(){/*@cc_on @*/if(!xmlhttp&&"undefined"!=typeof XMLHttpRequest)try{xmlhttp=new XMLHttpRequest}catch(a){xmlhttp=!1}if(!xmlhttp&&window.createRequest)try{xmlhttp=window.createRequest()}catch(a){xmlhttp=!1}}function getquery(a,b,c){xmlhttp||createHttpRequest(),xmlhttp.open("GET",a+"?"+b,!0),xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&(document.getElementById(c).innerHTML=xmlhttp.responseText)},xmlhttp.send(null)}function checkUser(){var a="qcmd=checkuser&user_email="+document.getElementById("user_email").value;getquery("/cgi-bin/dmquery.rb",a,"myText")}function checkUser0(){var a="/cgi-bin/dmquery.rb?qcmd=checkuser&user_email="+document.getElementById("user_email").value;xmlhttp||createHttpRequest(),xmlhttp.open("POST",a,!0),xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&($("myText").innerHTML=xmlhttp.responseText)},xmlhttp.send(null)}function postquery(a,b,c){xmlhttp||createHttpRequest(),xmlhttp.open("POST",a,!0),xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&(document.getElementById(c).innerHTML=xmlhttp.responseText)},xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xmlhttp.setRequestHeader("Content-length",b.length),xmlhttp.send(b)}function postquery2(a,b,c){xmlhttp||createHttpRequest(),xmlhttp.open("POST",a,!0),xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&(document.getElementById(c).src=xmlhttp.responseText)},xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xmlhttp.setRequestHeader("Content-length",b.length),xmlhttp.send(b)}function postquery3(a,b,c){xmlhttp||createHttpRequest(),xmlhttp.open("POST",a,!0),xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&c(xmlhttp.responseText)},xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xmlhttp.setRequestHeader("Content-length",b.length),xmlhttp.send(b)}function syncpost3(a,b,c){xmlhttp||createHttpRequest(),xmlhttp.open("POST",a,!1),xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xmlhttp.setRequestHeader("Content-length",b.length),xmlhttp.send(b),4==xmlhttp.readyState&&200==xmlhttp.status&&c(xmlhttp.responseText)}function test(){alert("llll")}var lastjddiv,lastflagdiv;function showjd(a,b){return lastflagdiv==b?($(a).toggle(),lastflagdiv.style.backgroundColor="#FFFFFF",void(lastjddiv=lastflagdiv=void 0)):void(lastflagdiv!=null&&(lastflagdiv.style.backgroundColor="#FFFFFF"),lastflagdiv=b,lastflagdiv.style.backgroundColor="#00FFFF",lastjddiv!=null&&lastjddiv.toggle(),lastjddiv=$(a),lastjddiv.toggle())}function checkValid(a,b){var c=document.getElementById(a).value;return null!=c&&""!=c||(null==b&&(b=a),alert(b+" can not be empty!"),!1)}var VerifyCode=!1;function checkVerify(){VerifyCode=!1;var a=!0;1<=arguments.size&&(a=arguments[0]);var b=!0===a?postquery3:syncpost3,c="qcmd=verifycode&vid="+document.getElementById("vid").value+"&vcode="+document.getElementById("vcode").value;b("/cgi-bin/dmquery.rb",c,function(a){var b=document.getElementById("vprompt"),c="",d="";0<=a.indexOf("Vcode Right")?(VerifyCode=!0,c="&#10003",b.className="right",b.style.color="#00ff00"):(b.className="wrong",b.style.color="#ff0000",c="X",d="\u8BF7\u91CD\u65B0\u8F93\u5165\u9A8C\u8BC1\u7801"),document.getElementById("vprompt").innerHTML=c,$("#vprompt2").html(d)})}function dbcheckVerify(){return!1==VerifyCode&&checkVerify(!1),VerifyCode}function newReview(){VerifyCode=!1;var a="qcmd=newreview&tid="+document.getElementById("topicid").value+"&body="+document.getElementById("body").value+"&vid="+document.getElementById("vid").value+"&vcode="+document.getElementById("vcode").value;postquery3("/cgi-bin/dmquery.rb",a,function(a){document.getElementById("reviewDiv").innerHTML=a})}!function(u){"use strict";function v(d,a){var b=(65535&d)+(65535&a);return(d>>16)+(a>>16)+(b>>16)<<16|65535&b}function b(c,a){return c<<a|c>>>32-a}function w(c,a,d,e,f,g){return v(b(v(v(a,c),v(e,g)),f),d)}function c(d,a,b,c,e,f,g){return w(a&b|~a&c,d,a,e,f,g)}function e(d,a,b,c,e,f,g){return w(a&c|b&~c,d,a,e,f,g)}function f(d,a,b,c,e,f,g){return w(a^b^c,d,a,e,f,g)}function g(d,a,b,c,e,f,g){return w(b^(a|~c),d,a,e,f,g)}function d(b,a){b[a>>5]|=128<<a%32,b[(a+64>>>9<<4)+14]=a;var h,q,r,s,t,u=1732584193,w=-271733879,x=-1732584194,y=271733878;for(h=0;h<b.length;h+=16)q=u,r=w,s=x,t=y,u=c(u,w,x,y,b[h],7,-680876936),y=c(y,u,w,x,b[h+1],12,-389564586),x=c(x,y,u,w,b[h+2],17,606105819),w=c(w,x,y,u,b[h+3],22,-1044525330),u=c(u,w,x,y,b[h+4],7,-176418897),y=c(y,u,w,x,b[h+5],12,1200080426),x=c(x,y,u,w,b[h+6],17,-1473231341),w=c(w,x,y,u,b[h+7],22,-45705983),u=c(u,w,x,y,b[h+8],7,1770035416),y=c(y,u,w,x,b[h+9],12,-1958414417),x=c(x,y,u,w,b[h+10],17,-42063),w=c(w,x,y,u,b[h+11],22,-1990404162),u=c(u,w,x,y,b[h+12],7,1804603682),y=c(y,u,w,x,b[h+13],12,-40341101),x=c(x,y,u,w,b[h+14],17,-1502002290),w=c(w,x,y,u,b[h+15],22,1236535329),u=e(u,w,x,y,b[h+1],5,-165796510),y=e(y,u,w,x,b[h+6],9,-1069501632),x=e(x,y,u,w,b[h+11],14,643717713),w=e(w,x,y,u,b[h],20,-373897302),u=e(u,w,x,y,b[h+5],5,-701558691),y=e(y,u,w,x,b[h+10],9,38016083),x=e(x,y,u,w,b[h+15],14,-660478335),w=e(w,x,y,u,b[h+4],20,-405537848),u=e(u,w,x,y,b[h+9],5,568446438),y=e(y,u,w,x,b[h+14],9,-1019803690),x=e(x,y,u,w,b[h+3],14,-187363961),w=e(w,x,y,u,b[h+8],20,1163531501),u=e(u,w,x,y,b[h+13],5,-1444681467),y=e(y,u,w,x,b[h+2],9,-51403784),x=e(x,y,u,w,b[h+7],14,1735328473),w=e(w,x,y,u,b[h+12],20,-1926607734),u=f(u,w,x,y,b[h+5],4,-378558),y=f(y,u,w,x,b[h+8],11,-2022574463),x=f(x,y,u,w,b[h+11],16,1839030562),w=f(w,x,y,u,b[h+14],23,-35309556),u=f(u,w,x,y,b[h+1],4,-1530992060),y=f(y,u,w,x,b[h+4],11,1272893353),x=f(x,y,u,w,b[h+7],16,-155497632),w=f(w,x,y,u,b[h+10],23,-1094730640),u=f(u,w,x,y,b[h+13],4,681279174),y=f(y,u,w,x,b[h],11,-358537222),x=f(x,y,u,w,b[h+3],16,-722521979),w=f(w,x,y,u,b[h+6],23,76029189),u=f(u,w,x,y,b[h+9],4,-640364487),y=f(y,u,w,x,b[h+12],11,-421815835),x=f(x,y,u,w,b[h+15],16,530742520),w=f(w,x,y,u,b[h+2],23,-995338651),u=g(u,w,x,y,b[h],6,-198630844),y=g(y,u,w,x,b[h+7],10,1126891415),x=g(x,y,u,w,b[h+14],15,-1416354905),w=g(w,x,y,u,b[h+5],21,-57434055),u=g(u,w,x,y,b[h+12],6,1700485571),y=g(y,u,w,x,b[h+3],10,-1894986606),x=g(x,y,u,w,b[h+10],15,-1051523),w=g(w,x,y,u,b[h+1],21,-2054922799),u=g(u,w,x,y,b[h+8],6,1873313359),y=g(y,u,w,x,b[h+15],10,-30611744),x=g(x,y,u,w,b[h+6],15,-1560198380),w=g(w,x,y,u,b[h+13],21,1309151649),u=g(u,w,x,y,b[h+4],6,-145523070),y=g(y,u,w,x,b[h+11],10,-1120210379),x=g(x,y,u,w,b[h+2],15,718787259),w=g(w,x,y,u,b[h+9],21,-343485551),u=v(u,q),w=v(w,r),x=v(x,s),y=v(y,t);return[u,w,x,y]}function h(d){var a,e="";for(a=0;a<32*d.length;a+=8)e+=String.fromCharCode(255&d[a>>5]>>>a%32);return e}function i(d){var a,e=[];for(e[(d.length>>2)-1]=void 0,a=0;a<e.length;a+=1)e[a]=0;for(a=0;a<8*d.length;a+=8)e[a>>5]|=(255&d.charCodeAt(a/8))<<a%32;return e}function j(b){return h(d(i(b),8*b.length))}function k(h,a){var b,j,k=i(h),l=[],f=[];for(l[15]=f[15]=void 0,16<k.length&&(k=d(k,8*h.length)),b=0;16>b;b+=1)l[b]=909522486^k[b],f[b]=1549556828^k[b]}function l(d){var a,f,g="";for(f=0;f<d.length;f+=1)a=d.charCodeAt(f),g+="0123456789abcdef".charAt(15&a>>>4)+"0123456789abcdef".charAt(15&a);return g}function m(b){return unescape(encodeURIComponent(b))}function n(b){return j(m(b))}function o(b){return l(n(b))}function p(c,a){return k(m(c),m(a))}function q(c,a){return l(p(c,a))}function a(d,a,b){return a?b?p(a,d):q(a,d):b?n(d):o(d)}"function"==typeof define&&define.amd?define(function(){return a}):u.md5=a}(this);var JSEncryptExports={};(function(a){var Y=String.fromCharCode,Z=Math.pow,$=Math.min,_=Math.max,aa=Math.floor;function u(d,a,b){null!=d&&("number"==typeof d?this.fromNumber(d,a,b):null==a&&"string"!=typeof d?this.fromString(d,256):this.fromString(d,a))}function w(){return new u(null)}function x(b){return c.charAt(b)}function y(e,a){var b=d[e.charCodeAt(a)];return null==b?-1:b}function A(c){var a=w();return a.fromInt(c),a}function B(d){var e,f=1;return 0!=(e=d>>>16)&&(d=e,f+=16),0!=(e=d>>8)&&(d=e,f+=8),0!=(e=d>>4)&&(d=e,f+=4),0!=(e=d>>2)&&(d=e,f+=2),0!=(e=d>>1)&&(d=e,f+=1),f}function C(b){this.m=b}function D(b){this.m=b,this.mp=b.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<b.DB-15)-1,this.mt2=2*b.t}function E(c,a){return c&a}function F(c,a){return c|a}function G(c,a){return c^a}function H(c,a){return c&~a}function I(c){if(0==c)return-1;var d=0;return 0==(65535&c)&&(c>>=16,d+=16),0==(255&c)&&(c>>=8,d+=8),0==(15&c)&&(c>>=4,d+=4),0==(3&c)&&(c>>=2,d+=2),0==(1&c)&&++d,d}function J(c){for(var d=0;0!=c;)c&=c-1,++d;return d}function K(){}function M(b){return b}function N(b){this.r2=w(),this.q3=w(),u.ONE.dlShiftTo(2*b.t,this.r2),this.mu=this.r2.divide(b),this.m=b}function O(){this.i=0,this.j=0,this.S=[]}function P(){return new O}function Q(){if(null==k){for(k=P();n>m;){var b=aa(65536*Math.random());l[m++]=255&b}for(k.init(l),m=0;m<l.length;++m)l[m]=0;m=0}return k.next()}function R(){}function S(c,a){return new u(c,a)}function T(h,a){if(a<h.length+11)return console.error("Message too long for RSA"),null;for(var i,j=[],c=h.length-1;0<=c&&0<a;)i=h.charCodeAt(c--),128>i?j[--a]=i:127<i&&2048>i?(j[--a]=128|63&i,j[--a]=192|i>>6):(j[--a]=128|63&i,j[--a]=128|63&i>>6,j[--a]=224|i>>12);j[--a]=0;for(var k=new R,f=[];2<a;){for(f[0]=0;0==f[0];)k.nextBytes(f);j[--a]=f[0]}return j[--a]=2,j[--a]=0,new u(j)}function U(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function V(g,a){for(var b=g.toByteArray(),c=0;c<b.length&&0==b[c];)++c;if(b.length-c!=a-1||2!=b[c])return null;for(++c;0!=b[c];)if(++c>=b.length)return null;for(var h,i="";++c<b.length;)h=255&b[c],128>h?i+=Y(h):191<h&&224>h?(i+=Y((31&h)<<6|63&b[c+1]),++c):(i+=Y((15&h)<<12|(63&b[c+1])<<6|63&b[c+2]),c+=2);return i}function W(e){var a,f,i="";for(a=0;a+3<=e.length;a+=3)f=parseInt(e.substring(a,a+3),16),i+=g.charAt(f>>6)+g.charAt(63&f);for(a+1==e.length?(f=parseInt(e.substring(a,a+1),16),i+=g.charAt(f<<2)):a+2==e.length&&(f=parseInt(e.substring(a,a+2),16),i+=g.charAt(f>>2)+g.charAt((3&f)<<4));0<(3&i.length);)i+=h;return i}function X(f){var a,i,j="",k=0;for(a=0;a<f.length&&f.charAt(a)!=h;++a)v=g.indexOf(f.charAt(a)),0>v||(0==k?(j+=x(v>>2),i=3&v,k=1):1==k?(j+=x(i<<2|v>>4),i=15&v,k=2):2==k?(j+=x(i),j+=x(v>>2),i=3&v,k=3):(j+=x(i<<2|v>>4),j+=x(15&v),k=0));return 1==k&&(j+=x(i<<2)),j}var ba;"Microsoft Internet Explorer"==navigator.appName?(u.prototype.am=function(l,m,b,c,n,o){for(var p=32767&m,g=m>>15;0<=--o;){var h=32767&this[l],q=this[l++]>>15,j=g*h+q*p;h=p*h+((32767&j)<<15)+b[c]+(1073741823&n),n=(h>>>30)+(j>>>15)+g*q+(n>>>30),b[c++]=1073741823&h}return n},ba=30):"Netscape"!=navigator.appName?(u.prototype.am=function(h,i,b,c,j,k){for(;0<=--k;){var l=i*this[h++]+b[c]+j;j=aa(l/67108864),b[c++]=67108863&l}return j},ba=26):(u.prototype.am=function(l,m,b,c,n,o){for(var p=16383&m,g=m>>14;0<=--o;){var h=16383&this[l],q=this[l++]>>14,j=g*h+q*p;h=p*h+((16383&j)<<14)+b[c]+n,n=(h>>28)+(j>>14)+g*q,b[c++]=268435455&h}return n},ba=28),u.prototype.DB=ba,u.prototype.DM=(1<<ba)-1,u.prototype.DV=1<<ba;u.prototype.FV=Z(2,52),u.prototype.F1=52-ba,u.prototype.F2=2*ba-52;var ca,b,c="0123456789abcdefghijklmnopqrstuvwxyz",d=[];for(ca=48,b=0;9>=b;++b)d[ca++]=b;for(ca=97,b=10;36>b;++b)d[ca++]=b;for(ca=65,b=10;36>b;++b)d[ca++]=b;C.prototype.convert=function(b){return 0>b.s||0<=b.compareTo(this.m)?b.mod(this.m):b},C.prototype.revert=function(b){return b},C.prototype.reduce=function(b){b.divRemTo(this.m,null,b)},C.prototype.mulTo=function(d,a,b){d.multiplyTo(a,b),this.reduce(b)},C.prototype.sqrTo=function(c,a){c.squareTo(a),this.reduce(a)},D.prototype.convert=function(c){var a=w();return c.abs().dlShiftTo(this.m.t,a),a.divRemTo(this.m,null,a),0>c.s&&0<a.compareTo(u.ZERO)&&this.m.subTo(a,a),a},D.prototype.revert=function(c){var a=w();return c.copyTo(a),this.reduce(a),a},D.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var a=0;a<this.m.t;++a){var f=32767&e[a],g=f*this.mpl+((f*this.mph+(e[a]>>15)*this.mpl&this.um)<<15)&e.DM;for(f=a+this.m.t,e[f]+=this.m.am(0,g,e,a,0,this.m.t);e[f]>=e.DV;)e[f]-=e.DV,e[++f]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},D.prototype.mulTo=function(d,a,b){d.multiplyTo(a,b),this.reduce(b)},D.prototype.sqrTo=function(c,a){c.squareTo(a),this.reduce(a)},u.prototype.copyTo=function(c){for(var a=this.t-1;0<=a;--a)c[a]=this[a];c.t=this.t,c.s=this.s},u.prototype.fromInt=function(b){this.t=1,this.s=0>b?-1:0,0<b?this[0]=b:-1>b?this[0]=b+DV:this.t=0},u.prototype.fromString=function(h,a){var b;if(16==a)b=4;else if(8==a)b=3;else if(256==a)b=8;else if(2==a)b=1;else if(32==a)b=5;else{if(4!=a)return void this.fromRadix(h,a);b=2}this.t=0,this.s=0;for(var i,j=h.length,k=!1,l=0;0<=--j;)i=8==b?255&h[j]:y(h,j),0>i?"-"==h.charAt(j)&&(k=!0):(k=!1,0==l?this[this.t++]=i:l+b>this.DB?(this[this.t-1]|=(i&(1<<this.DB-l)-1)<<l,this[this.t++]=i>>this.DB-l):this[this.t-1]|=i<<l,l+=b,l>=this.DB&&(l-=this.DB));8==b&&0!=(128&h[0])&&(this.s=-1,0<l&&(this[this.t-1]|=(1<<this.DB-l)-1<<l)),this.clamp(),k&&u.ZERO.subTo(this,this)},u.prototype.clamp=function(){for(var b=this.s&this.DM;0<this.t&&this[this.t-1]==b;)--this.t},u.prototype.dlShiftTo=function(d,a){var b;for(b=this.t-1;0<=b;--b)a[b+d]=this[b];for(b=d-1;0<=b;--b)a[b]=0;a.t=this.t+d,a.s=this.s},u.prototype.drShiftTo=function(d,a){for(var b=d;b<this.t;++b)a[b-d]=this[b];a.t=_(this.t-d,0),a.s=this.s},u.prototype.lShiftTo=function(f,a){var b,i=f%this.DB,d=this.DB-i,e=aa(f/this.DB),g=this.s<<i&this.DM;for(b=this.t-1;0<=b;--b)a[b+e+1]=this[b]>>d|g,g=(this[b]&(1<<d)-1)<<i;for(b=e-1;0<=b;--b)a[b]=0;a[e]=g,a.t=this.t+e+1,a.s=this.s,a.clamp()},u.prototype.rShiftTo=function(h,a){a.s=this.s;var b=aa(h/this.DB);if(b>=this.t)return void(a.t=0);var c=h%this.DB,d=this.DB-c,e=(1<<c)-1;a[0]=this[b]>>c;for(var f=b+1;f<this.t;++f)a[f-b-1]|=(this[f]&e)<<d,a[f-b]=this[f]>>c;0<c&&(a[this.t-b-1]|=(this.s&e)<<d),a.t=this.t-b,a.clamp()},u.prototype.subTo=function(f,a){for(var b=0,g=0,h=$(f.t,this.t);h>b;)g+=this[b]-f[b],a[b++]=g&this.DM,g>>=this.DB;if(f.t<this.t){for(g-=f.s;b<this.t;)g+=this[b],a[b++]=g&this.DM,g>>=this.DB;g+=this.s}else{for(g+=this.s;b<f.t;)g-=f[b],a[b++]=g&this.DM,g>>=this.DB;g-=f.s}a.s=0>g?-1:0,-1>g?a[b++]=this.DV+g:0<g&&(a[b++]=g),a.t=b,a.clamp()},u.prototype.multiplyTo=function(f,a){var b=this.abs(),c=f.abs(),d=b.t;for(a.t=d+c.t;0<=--d;)a[d]=0;for(d=0;d<c.t;++d)a[d+b.t]=b.am(0,c[d],a,d,0,b.t);a.s=0,a.clamp(),this.s!=f.s&&u.ZERO.subTo(a,a)},u.prototype.squareTo=function(e){for(var a=this.abs(),b=e.t=2*a.t;0<=--b;)e[b]=0;for(b=0;b<a.t-1;++b){var f=a.am(b,a[b],e,2*b,0,1);(e[b+a.t]+=a.am(b+1,2*a[b],e,2*b+1,f,a.t-b-1))>=a.DV&&(e[b+a.t]-=a.DV,e[b+a.t+1]=1)}0<e.t&&(e[e.t-1]+=a.am(b,a[b],e,2*b,0,1)),e.s=0,e.clamp()},u.prototype.divRemTo=function(t,a,b){var x=t.abs();if(!(0>=x.t)){var d=this.abs();if(d.t<x.t)return null!=a&&a.fromInt(0),void(null!=b&&this.copyTo(b));null==b&&(b=w());var e=w(),f=this.s,g=t.s,h=this.DB-B(x[x.t-1]);0<h?(x.lShiftTo(h,e),d.lShiftTo(h,b)):(x.copyTo(e),d.copyTo(b));var i=e.t,j=e[i-1];if(0!=j){var k=j*(1<<this.F1)+(1<i?e[i-2]>>this.F2:0),l=this.FV/k,m=(1<<this.F1)/k,n=1<<this.F2,o=b.t,y=o-i,z=null==a?w():a;for(e.dlShiftTo(y,z),0<=b.compareTo(z)&&(b[b.t++]=1,b.subTo(z,b)),u.ONE.dlShiftTo(i,z),z.subTo(e,e);e.t<i;)e[e.t++]=0;for(;0<=--y;){var r=b[--o]==j?this.DM:aa(b[o]*l+(b[o-1]+n)*m);if((b[o]+=e.am(0,r,b,y,0,i))<r)for(e.dlShiftTo(y,z),b.subTo(z,b);b[o]<--r;)b.subTo(z,b)}null!=a&&(b.drShiftTo(i,a),f!=g&&u.ZERO.subTo(a,a)),b.t=i,b.clamp(),0<h&&b.rShiftTo(h,b),0>f&&u.ZERO.subTo(b,b)}}},u.prototype.invDigit=function(){if(1>this.t)return 0;var c=this[0];if(0==(1&c))return 0;var a=3&c;return a=15&a*(2-(15&c)*a),a=255&a*(2-(255&c)*a),a=65535&a*(2-(65535&(65535&c)*a)),a=a*(2-c*a%this.DV)%this.DV,0<a?this.DV-a:-a},u.prototype.isEven=function(){return 0==(0<this.t?1&this[0]:this.s)},u.prototype.exp=function(h,a){if(4294967295<h||1>h)return u.ONE;var b=w(),i=w(),j=a.convert(this),e=B(h)-1;for(j.copyTo(b);0<=--e;)if(a.sqrTo(b,i),0<(h&1<<e))a.mulTo(i,j,b);else{var k=b;b=i,i=k}return a.revert(b)},u.prototype.toString=function(i){if(0>this.s)return"-"+this.negate().toString(i);var a;if(16==i)a=4;else if(8==i)a=3;else if(2==i)a=1;else if(32==i)a=5;else{if(4!=i)return this.toRadix(i);a=2}var j,k=(1<<a)-1,d=!1,l="",m=this.t,n=this.DB-m*this.DB%a;if(0<m--)for(n<this.DB&&0<(j=this[m]>>n)&&(d=!0,l=x(j));0<=m;)a>n?(j=(this[m]&(1<<n)-1)<<a-n,j|=this[--m]>>(n+=this.DB-a)):(j=this[m]>>(n-=a)&k,0>=n&&(n+=this.DB,--m)),0<j&&(d=!0),d&&(l+=x(j));return d?l:"0"},u.prototype.negate=function(){var b=w();return u.ZERO.subTo(this,b),b},u.prototype.abs=function(){return 0>this.s?this.negate():this},u.prototype.compareTo=function(d){var a=this.s-d.s;if(0!=a)return a;var e=this.t;if(a=e-d.t,0!=a)return 0>this.s?-a:a;for(;0<=--e;)if(0!=(a=this[e]-d[e]))return a;return 0},u.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+B(this[this.t-1]^this.s&this.DM)},u.prototype.mod=function(c){var a=w();return this.abs().divRemTo(c,null,a),0>this.s&&0<a.compareTo(u.ZERO)&&c.subTo(a,a),a},u.prototype.modPowInt=function(d,a){var b;return b=256>d||a.isEven()?new C(a):new D(a),this.exp(d,b)},u.ZERO=A(0),u.ONE=A(1),K.prototype.convert=M,K.prototype.revert=M,K.prototype.mulTo=function(d,a,b){d.multiplyTo(a,b)},K.prototype.sqrTo=function(c,a){c.squareTo(a)},N.prototype.convert=function(c){if(0>c.s||c.t>2*this.m.t)return c.mod(this.m);if(0>c.compareTo(this.m))return c;var a=w();return c.copyTo(a),this.reduce(a),a},N.prototype.revert=function(b){return b},N.prototype.reduce=function(b){for(b.drShiftTo(this.m.t-1,this.r2),b.t>this.m.t+1&&(b.t=this.m.t+1,b.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>b.compareTo(this.r2);)b.dAddOffset(1,this.m.t+1);for(b.subTo(this.r2,b);0<=b.compareTo(this.m);)b.subTo(this.m,b)},N.prototype.mulTo=function(d,a,b){d.multiplyTo(a,b),this.reduce(b)},N.prototype.sqrTo=function(c,a){c.squareTo(a),this.reduce(a)};var i=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],j=67108864/i[i.length-1];u.prototype.chunkSize=function(b){return aa(Math.LN2*this.DB/Math.log(b))},u.prototype.toRadix=function(h){if(null==h&&(h=10),0==this.signum()||2>h||36<h)return"0";var i=this.chunkSize(h),b=Z(h,i),c=A(b),d=w(),e=w(),f="";for(this.divRemTo(c,d,e);0<d.signum();)f=(b+e.intValue()).toString(h).substr(1)+f,d.divRemTo(c,d,e);return e.intValue().toString(h)+f},u.prototype.fromRadix=function(j,a){this.fromInt(0),null==a&&(a=10);for(var k,l=this.chunkSize(a),c=Z(a,l),d=!1,m=0,n=0,o=0;o<j.length;++o)k=y(j,o),0>k?"-"==j.charAt(o)&&0==this.signum()&&(d=!0):(n=a*n+k,++m>=l&&(this.dMultiply(c),this.dAddOffset(n,0),m=0,n=0));0<m&&(this.dMultiply(Z(a,m)),this.dAddOffset(n,0)),d&&u.ZERO.subTo(this,this)},u.prototype.fromNumber=function(f,a,b){if(!("number"==typeof a)){var c=[],d=7&f;c.length=(f>>3)+1,a.nextBytes(c),0<d?c[0]&=(1<<d)-1:c[0]=0,this.fromString(c,256)}else if(2>f)this.fromInt(1);else for(this.fromNumber(f,b),this.testBit(f-1)||this.bitwiseTo(u.ONE.shiftLeft(f-1),F,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(a);)this.dAddOffset(2,0),this.bitLength()>f&&this.subTo(u.ONE.shiftLeft(f-1),this)},u.prototype.bitwiseTo=function(g,a,b){var c,h,i=$(g.t,this.t);for(c=0;i>c;++c)b[c]=a(this[c],g[c]);if(g.t<this.t){for(h=g.s&this.DM,c=i;c<this.t;++c)b[c]=a(this[c],h);b.t=this.t}else{for(h=this.s&this.DM,c=i;c<g.t;++c)b[c]=a(h,g[c]);b.t=g.t}b.s=a(this.s,g.s),b.clamp()},u.prototype.changeBit=function(d,a){var b=u.ONE.shiftLeft(d);return this.bitwiseTo(b,a,b),b},u.prototype.addTo=function(f,a){for(var b=0,g=0,h=$(f.t,this.t);h>b;)g+=this[b]+f[b],a[b++]=g&this.DM,g>>=this.DB;if(f.t<this.t){for(g+=f.s;b<this.t;)g+=this[b],a[b++]=g&this.DM,g>>=this.DB;g+=this.s}else{for(g+=this.s;b<f.t;)g+=f[b],a[b++]=g&this.DM,g>>=this.DB;g+=f.s}a.s=0>g?-1:0,0<g?a[b++]=g:-1>g&&(a[b++]=this.DV+g),a.t=b,a.clamp()},u.prototype.dMultiply=function(b){this[this.t]=this.am(0,b-1,this,0,0,this.t),++this.t,this.clamp()},u.prototype.dAddOffset=function(c,a){if(0!=c){for(;this.t<=a;)this[this.t++]=0;for(this[a]+=c;this[a]>=this.DV;)this[a]-=this.DV,++a>=this.t&&(this[this.t++]=0),++this[a]}},u.prototype.multiplyLowerTo=function(f,a,b){var c=$(this.t+f.t,a);for(b.s=0,b.t=c;0<c;)b[--c]=0;var g;for(g=b.t-this.t;g>c;++c)b[c+this.t]=this.am(0,f[c],b,c,0,this.t);for(g=$(f.t,a);g>c;++c)this.am(0,f[c],b,c,0,a-c);b.clamp()},u.prototype.multiplyUpperTo=function(e,a,f){--a;var c=f.t=this.t+e.t-a;for(f.s=0;0<=--c;)f[c]=0;for(c=_(a-this.t,0);c<e.t;++c)f[this.t+c-a]=this.am(a-c,e[c],f,0,0,this.t+c-a);f.clamp(),f.drShiftTo(1,f)},u.prototype.modInt=function(e){if(0>=e)return 0;var a=this.DV%e,b=0>this.s?e-1:0;if(0<this.t)if(0==a)b=this[0]%e;else for(var f=this.t-1;0<=f;--f)b=(a*b+this[f])%e;return b},u.prototype.millerRabin=function(j){var k=this.subtract(u.ONE),b=k.getLowestSetBit();if(0>=b)return!1;var c=k.shiftRight(b);j=j+1>>1,j>i.length&&(j=i.length);for(var d=w(),e=0;j>e;++e){d.fromInt(i[aa(Math.random()*i.length)]);var l=d.modPow(c,this);if(0!=l.compareTo(u.ONE)&&0!=l.compareTo(k)){for(var m=1;m++<b&&0!=l.compareTo(k);)if(l=l.modPowInt(2,this),0==l.compareTo(u.ONE))return!1;if(0!=l.compareTo(k))return!1}}return!0},u.prototype.clone=function(){var b=w();return this.copyTo(b),b},u.prototype.intValue=function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},u.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},u.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},u.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1},u.prototype.toByteArray=function(){var f=this.t,g=[];g[0]=this.s;var b,h=this.DB-f*this.DB%8,i=0;if(0<f--)for(h<this.DB&&(b=this[f]>>h)!=(this.s&this.DM)>>h&&(g[i++]=b|this.s<<this.DB-h);0<=f;)8>h?(b=(this[f]&(1<<h)-1)<<8-h,b|=this[--f]>>(h+=this.DB-8)):(b=255&this[f]>>(h-=8),0>=h&&(h+=this.DB,--f)),0!=(128&b)&&(b|=-256),0==i&&(128&this.s)!=(128&b)&&++i,(0<i||b!=this.s)&&(g[i++]=b);return g},u.prototype.equals=function(b){return 0==this.compareTo(b)},u.prototype.min=function(b){return 0>this.compareTo(b)?this:b},u.prototype.max=function(b){return 0<this.compareTo(b)?this:b},u.prototype.and=function(c){var a=w();return this.bitwiseTo(c,E,a),a},u.prototype.or=function(c){var a=w();return this.bitwiseTo(c,F,a),a},u.prototype.xor=function(c){var a=w();return this.bitwiseTo(c,G,a),a},u.prototype.andNot=function(c){var a=w();return this.bitwiseTo(c,H,a),a},u.prototype.not=function(){for(var c=w(),a=0;a<this.t;++a)c[a]=this.DM&~this[a];return c.t=this.t,c.s=~this.s,c},u.prototype.shiftLeft=function(c){var a=w();return 0>c?this.rShiftTo(-c,a):this.lShiftTo(c,a),a},u.prototype.shiftRight=function(c){var a=w();return 0>c?this.lShiftTo(-c,a):this.rShiftTo(c,a),a},u.prototype.getLowestSetBit=function(){for(var b=0;b<this.t;++b)if(0!=this[b])return b*this.DB+I(this[b]);return 0>this.s?this.t*this.DB:-1},u.prototype.bitCount=function(){for(var d=0,e=this.s&this.DM,b=0;b<this.t;++b)d+=J(this[b]^e);return d},u.prototype.testBit=function(c){var a=aa(c/this.DB);return a>=this.t?0!=this.s:0!=(this[a]&1<<c%this.DB)},u.prototype.setBit=function(b){return this.changeBit(b,F)},u.prototype.clearBit=function(b){return this.changeBit(b,H)},u.prototype.flipBit=function(b){return this.changeBit(b,G)},u.prototype.add=function(c){var a=w();return this.addTo(c,a),a},u.prototype.subtract=function(c){var a=w();return this.subTo(c,a),a},u.prototype.multiply=function(c){var a=w();return this.multiplyTo(c,a),a},u.prototype.divide=function(c){var a=w();return this.divRemTo(c,a,null),a},u.prototype.remainder=function(c){var a=w();return this.divRemTo(c,null,a),a},u.prototype.divideAndRemainder=function(d){var a=w(),b=w();return this.divRemTo(d,a,b),[a,b]},u.prototype.modPow=function(q,a){var b,r,s=q.bitLength(),t=A(1);if(0>=s)return t;b=18>s?1:48>s?3:144>s?4:768>s?5:6,r=8>s?new C(a):a.isEven()?new N(a):new D(a);var u=[],g=3,x=b-1,i=(1<<b)-1;if(u[1]=r.convert(this),1<b){var j=w();for(r.sqrTo(u[1],j);i>=g;)u[g]=w(),r.mulTo(j,u[g-2],u[g]),g+=2}var k,y,z=q.t-1,E=!0,F=w();for(s=B(q[z])-1;0<=z;){for(s>=x?k=q[z]>>s-x&i:(k=(q[z]&(1<<s+1)-1)<<x-s,0<z&&(k|=q[z-1]>>this.DB+s-x)),g=b;0==(1&k);)k>>=1,--g;if(0>(s-=g)&&(s+=this.DB,--z),E)u[k].copyTo(t),E=!1;else{for(;1<g;)r.sqrTo(t,F),r.sqrTo(F,t),g-=2;0<g?r.sqrTo(t,F):(y=t,t=F,F=y),r.mulTo(F,u[k],t)}for(;0<=z&&0==(q[z]&1<<s);)r.sqrTo(t,F),y=t,t=F,F=y,0>--s&&(s=this.DB-1,--z)}return r.revert(t)},u.prototype.modInverse=function(i){var a=i.isEven();if(this.isEven()&&a||0==i.signum())return u.ZERO;for(var b=i.clone(),c=this.clone(),d=A(1),e=A(0),f=A(0),g=A(1);0!=b.signum();){for(;b.isEven();)b.rShiftTo(1,b),a?(d.isEven()&&e.isEven()||(d.addTo(this,d),e.subTo(i,e)),d.rShiftTo(1,d)):e.isEven()||e.subTo(i,e),e.rShiftTo(1,e);for(;c.isEven();)c.rShiftTo(1,c),a?(f.isEven()&&g.isEven()||(f.addTo(this,f),g.subTo(i,g)),f.rShiftTo(1,f)):g.isEven()||g.subTo(i,g),g.rShiftTo(1,g);0<=b.compareTo(c)?(b.subTo(c,b),a&&d.subTo(f,d),e.subTo(g,e)):(c.subTo(b,c),a&&f.subTo(d,f),g.subTo(e,g))}return 0==c.compareTo(u.ONE)?0<=g.compareTo(i)?g.subtract(i):0>g.signum()?(g.addTo(i,g),0>g.signum()?g.add(i):g):g:u.ZERO},u.prototype.pow=function(b){return this.exp(b,new K)},u.prototype.gcd=function(g){var a=0>this.s?this.negate():this.clone(),h=0>g.s?g.negate():g.clone();if(0>a.compareTo(h)){var i=a;a=h,h=i}var d=a.getLowestSetBit(),j=h.getLowestSetBit();if(0>j)return a;for(j>d&&(j=d),0<j&&(a.rShiftTo(j,a),h.rShiftTo(j,h));0<a.signum();)0<(d=a.getLowestSetBit())&&a.rShiftTo(d,a),0<(d=h.getLowestSetBit())&&h.rShiftTo(d,h),0<=a.compareTo(h)?(a.subTo(h,a),a.rShiftTo(1,a)):(h.subTo(a,h),h.rShiftTo(1,h));return 0<j&&h.lShiftTo(j,h),h},u.prototype.isProbablePrime=function(f){var a,g=this.abs();if(1==g.t&&g[0]<=i[i.length-1]){for(a=0;a<i.length;++a)if(g[0]==i[a])return!0;return!1}if(g.isEven())return!1;for(a=1;a<i.length;){for(var c=i[a],h=a+1;h<i.length&&j>c;)c*=i[h++];for(c=g.modInt(c);h>a;)if(0==c%i[a++])return!1}return g.millerRabin(f)},u.prototype.square=function(){var b=w();return this.squareTo(b),b},O.prototype.init=function(e){var a,f,g;for(a=0;256>a;++a)this.S[a]=a;for(f=0,a=0;256>a;++a)f=255&f+this.S[a]+e[a%e.length],g=this.S[a],this.S[a]=this.S[f],this.S[f]=g;this.i=0,this.j=0},O.prototype.next=function(){var b;return this.i=255&this.i+1,this.j=255&this.j+this.S[this.i],b=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=b,this.S[255&b+this.S[this.i]]};var k,l,m,n=256;if(null==l){l=[],m=0;var o;if(window.crypto&&window.crypto.getRandomValues){var e=new Uint32Array(256);for(window.crypto.getRandomValues(e),o=0;o<e.length;++o)l[m++]=255&e[o]}var f=function(c){if(this.count=this.count||0,256<=this.count||m>=256)return void(window.removeEventListener?window.removeEventListener("mousemove",f):window.detachEvent&&window.detachEvent("onmousemove",f));this.count+=1;var a=c.x+c.y;l[m++]=255&a};window.addEventListener?window.addEventListener("mousemove",f):window.attachEvent&&window.attachEvent("onmousemove",f)}R.prototype.nextBytes=function(c){var a;for(a=0;a<c.length;++a)c[a]=Q()},U.prototype.doPublic=function(b){return b.modPowInt(this.e,this.n)},U.prototype.setPublic=function(c,a){null!=c&&null!=a&&0<c.length&&0<a.length?(this.n=S(c,16),this.e=parseInt(a,16)):console.error("Invalid RSA public key")},U.prototype.encrypt=function(e){var a=T(e,this.n.bitLength()+7>>3);if(null==a)return null;var b=this.doPublic(a);if(null==b)return null;var c=b.toString(16);return 0==(1&c.length)?c:"0"+c},U.prototype.doPrivate=function(d){if(null==this.p||null==this.q)return d.modPow(this.d,this.n);for(var a=d.mod(this.p).modPow(this.dmp1,this.p),e=d.mod(this.q).modPow(this.dmq1,this.q);0>a.compareTo(e);)a=a.add(this.p);return a.subtract(e).multiply(this.coeff).mod(this.p).multiply(this.q).add(e)},U.prototype.setPrivate=function(d,a,b){null!=d&&null!=a&&0<d.length&&0<a.length?(this.n=S(d,16),this.e=parseInt(a,16),this.d=S(b,16)):console.error("Invalid RSA private key")},U.prototype.setPrivateEx=function(i,a,b,c,d,e,f,g){null!=i&&null!=a&&0<i.length&&0<a.length?(this.n=S(i,16),this.e=parseInt(a,16),this.d=S(b,16),this.p=S(c,16),this.q=S(d,16),this.dmp1=S(e,16),this.dmq1=S(f,16),this.coeff=S(g,16)):console.error("Invalid RSA private key")},U.prototype.generate=function(j,a){var b=new R,c=j>>1;this.e=parseInt(a,16);for(var d=new u(a,16);;){for(;this.p=new u(j-c,1,b),0!=this.p.subtract(u.ONE).gcd(d).compareTo(u.ONE)||!this.p.isProbablePrime(10););for(;this.q=new u(c,1,b),0!=this.q.subtract(u.ONE).gcd(d).compareTo(u.ONE)||!this.q.isProbablePrime(10););if(0>=this.p.compareTo(this.q)){var e=this.p;this.p=this.q,this.q=e}var f=this.p.subtract(u.ONE),g=this.q.subtract(u.ONE),h=f.multiply(g);if(0==h.gcd(d).compareTo(u.ONE)){this.n=this.p.multiply(this.q),this.d=d.modInverse(h),this.dmp1=this.d.mod(f),this.dmq1=this.d.mod(g),this.coeff=this.q.modInverse(this.p);break}}},U.prototype.decrypt=function(d){var a=S(d,16),b=this.doPrivate(a);return null==b?null:V(b,this.n.bitLength()+7>>3)},function(){U.prototype.generateAsync=function(k,a,b){var c=new R,d=k>>1;this.e=parseInt(a,16);var l=new u(a,16),f=this,g=function(){var e=function(){if(0>=f.p.compareTo(f.q)){var c=f.p;f.p=f.q,f.q=c}var a=f.p.subtract(u.ONE),h=f.q.subtract(u.ONE),d=a.multiply(h);0==d.gcd(l).compareTo(u.ONE)?(f.n=f.p.multiply(f.q),f.d=l.modInverse(d),f.dmp1=f.d.mod(a),f.dmq1=f.d.mod(h),f.coeff=f.q.modInverse(f.p),setTimeout(function(){b()},0)):setTimeout(g,0)},h=function(){f.q=w(),f.q.fromNumberAsync(d,1,c,function(){f.q.subtract(u.ONE).gcda(l,function(b){0==b.compareTo(u.ONE)&&f.q.isProbablePrime(10)?setTimeout(e,0):setTimeout(h,0)})})},i=function(){f.p=w(),f.p.fromNumberAsync(k-d,1,c,function(){f.p.subtract(u.ONE).gcda(l,function(b){0==b.compareTo(u.ONE)&&f.p.isProbablePrime(10)?setTimeout(h,0):setTimeout(i,0)})})};setTimeout(i,0)};setTimeout(g,0)};u.prototype.gcda=function(i,a){var b=0>this.s?this.negate():this.clone(),j=0>i.s?i.negate():i.clone();if(0>b.compareTo(j)){var k=b;b=j,j=k}var e=b.getLowestSetBit(),l=j.getLowestSetBit();if(0>l)return void a(b);l>e&&(l=e),0<l&&(b.rShiftTo(l,b),j.rShiftTo(l,j));var m=function(){0<(e=b.getLowestSetBit())&&b.rShiftTo(e,b),0<(e=j.getLowestSetBit())&&j.rShiftTo(e,j),0<=b.compareTo(j)?(b.subTo(j,b),b.rShiftTo(1,b)):(j.subTo(b,j),j.rShiftTo(1,j)),0<b.signum()?setTimeout(m,0):(0<l&&j.lShiftTo(l,j),setTimeout(function(){a(j)},0))};setTimeout(m,10)};u.prototype.fromNumberAsync=function(i,a,b,c){if(!("number"==typeof a)){var d=[],g=7&i;d.length=(i>>3)+1,a.nextBytes(d),0<g?d[0]&=(1<<g)-1:d[0]=0,this.fromString(d,256)}else if(2>i)this.fromInt(1);else{this.fromNumber(i,b),this.testBit(i-1)||this.bitwiseTo(u.ONE.shiftLeft(i-1),F,this),this.isEven()&&this.dAddOffset(1,0);var h=this,e=function(){h.dAddOffset(2,0),h.bitLength()>i&&h.subTo(u.ONE.shiftLeft(i-1),h),h.isProbablePrime(a)?setTimeout(function(){c()},0):setTimeout(e,0)};setTimeout(e,0)}}}();var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="=",p=p||{};p.env=p.env||{};var q=p,r=Object.prototype,s=["toString","valueOf"];p.env.parseUA=function(i){var a,j=function(c){var a=0;return parseFloat(c.replace(/\./g,function(){return 1==a++?"":"."}))},c=navigator,d={ie:0,opera:0,gecko:0,webkit:0,chrome:0,mobile:null,air:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,webos:0,caja:c&&c.cajaVersion,secure:!1,os:null},e=i||navigator&&navigator.userAgent,f=window&&window.location,g=f&&f.href;return d.secure=g&&0===g.toLowerCase().indexOf("https"),e&&(/windows|win32/i.test(e)?d.os="windows":/macintosh/i.test(e)?d.os="macintosh":/rhino/i.test(e)&&(d.os="rhino"),/KHTML/.test(e)&&(d.webkit=1),a=e.match(/AppleWebKit\/([^\s]*)/),a&&a[1]&&(d.webkit=j(a[1]),/ Mobile\//.test(e)?(d.mobile="Apple",a=e.match(/OS ([^\s]*)/),a&&a[1]&&(a=j(a[1].replace("_","."))),d.ios=a,d.ipad=d.ipod=d.iphone=0,a=e.match(/iPad|iPod|iPhone/),a&&a[0]&&(d[a[0].toLowerCase()]=d.ios)):(a=e.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/),a&&(d.mobile=a[0]),/webOS/.test(e)&&(d.mobile="WebOS",a=e.match(/webOS\/([^\s]*);/),a&&a[1]&&(d.webos=j(a[1]))),/ Android/.test(e)&&(d.mobile="Android",a=e.match(/Android ([^\s]*);/),a&&a[1]&&(d.android=j(a[1])))),a=e.match(/Chrome\/([^\s]*)/),a&&a[1]?d.chrome=j(a[1]):(a=e.match(/AdobeAIR\/([^\s]*)/),a&&(d.air=a[0]))),d.webkit||(a=e.match(/Opera[\s\/]([^\s]*)/),a&&a[1]?(d.opera=j(a[1]),a=e.match(/Version\/([^\s]*)/),a&&a[1]&&(d.opera=j(a[1])),a=e.match(/Opera Mini[^;]*/),a&&(d.mobile=a[0])):(a=e.match(/MSIE\s([^;]*)/),a&&a[1]?d.ie=j(a[1]):(a=e.match(/Gecko\/([^\s]*)/),a&&(d.gecko=1,a=e.match(/rv:([^\s\)]*)/),a&&a[1]&&(d.gecko=j(a[1]))))))),d},p.env.ua=p.env.parseUA(),p.isFunction=function(b){return"function"==typeof b||r.toString.apply(b)==="[object Function]"},p._IEEnumFix=p.env.ua.ie?function(f,a){var b,g,h;for(b=0;b<s.length;b+=1)g=s[b],h=a[g],q.isFunction(h)&&h!=r[g]&&(f[g]=h)}:function(){},p.extend=function(f,a,b){if(!a||!f)throw new Error("extend failed, please check that all dependencies are included.");var c,g=function(){};if(g.prototype=a.prototype,f.prototype=new g,f.prototype.constructor=f,f.superclass=a.prototype,a.prototype.constructor==r.constructor&&(a.prototype.constructor=a),b){for(c in b)q.hasOwnProperty(b,c)&&(f.prototype[c]=b[c]);q._IEEnumFix(f.prototype,b)}},"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(c){var a=c.toString(16);return 1==a.length%2&&(a="0"+a),a},this.bigIntToMinTwosComplementsHex=function(i){var a=i.toString(16);if("-"!=a.substr(0,1))1==a.length%2?a="0"+a:a.match(/^[0-7]/)||(a="00"+a);else{var j=a.substr(1),c=j.length;1==c%2?c+=1:a.match(/^[0-7]/)||(c+=2);for(var k="",l=0;c>l;l++)k+="f";var m=new u(k,16),g=m.xor(i).add(u.ONE);a=g.toString(16).replace(/^-/,"")}return a},this.getPEMStringFromHex=function(f,a){var b=CryptoJS.enc.Hex.parse(f),c=CryptoJS.enc.Base64.stringify(b),d=c.replace(/(.{64})/g,"$1\r\n");return d=d.replace(/\r\n$/,""),"-----BEGIN "+a+"-----\r\n"+d+"\r\n-----END "+a+"-----\r\n"}},KJUR.asn1.ASN1Object=function(){this.getLengthHexFromValue=function(){if("undefined"==typeof this.hV||null==this.hV)throw"this.hV is null or undefined.";if(1==this.hV.length%2)throw"value hex must be even length: n="+0+",v="+this.hV;var a=this.hV.length/2,b=a.toString(16);if(1==b.length%2&&(b="0"+b),128>a)return b;var e=b.length/2;if(15<e)throw"ASN.1 length too long to represent by 8x: n = "+a.toString(16);return(128+e).toString(16)+b},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},KJUR.asn1.DERAbstractString=function(b){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(b){this.hTLV=null,this.isModified=!0,this.s=b,this.hV=stohex(this.s)},this.setStringHex=function(b){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=b},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof b&&("undefined"==typeof b.str?"undefined"!=typeof b.hex&&this.setStringHex(b.hex):this.setString(b.str))},p.extend(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractTime=function(){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(c){utc=c.getTime()+6e4*c.getTimezoneOffset();var a=new Date(utc);return a},this.formatDate=function(k,a){var b=this.zeroPadding,c=this.localDateToUTC(k),d=c.getFullYear()+"";"utc"==a&&(d=d.substr(2,2));var l=b(c.getMonth()+1+"",2),f=b(c.getDate()+"",2),g=b(c.getHours()+"",2),h=b(c.getMinutes()+"",2),i=b(c.getSeconds()+"",2);return d+l+f+g+h+i+"Z"},this.zeroPadding=function(c,a){return c.length>=a?c:Array(a-c.length+1).join("0")+c},this.getString=function(){return this.s},this.setString=function(b){this.hTLV=null,this.isModified=!0,this.s=b,this.hV=stohex(this.s)},this.setByDateValue=function(h,a,b,c,d,e){var f=new Date(Date.UTC(h,a-1,b,c,d,e,0));this.setByDate(f)},this.getFreshValueHex=function(){return this.hV}},p.extend(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractStructured=function(b){KJUR.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(b){this.hTLV=null,this.isModified=!0,this.asn1Array=b},this.appendASN1Object=function(b){this.hTLV=null,this.isModified=!0,this.asn1Array.push(b)},this.asn1Array=[],"undefined"!=typeof b&&"undefined"!=typeof b.array&&(this.asn1Array=b.array)},p.extend(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object),KJUR.asn1.DERBoolean=function(){KJUR.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},p.extend(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object),KJUR.asn1.DERInteger=function(b){KJUR.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(b){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(b)},this.setByInteger=function(c){var a=new u(c+"",10);this.setByBigInteger(a)},this.setValueHex=function(b){this.hV=b},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof b&&("undefined"==typeof b.bigint?"undefined"==typeof b.int?"undefined"!=typeof b.hex&&this.setValueHex(b.hex):this.setByInteger(b.int):this.setByBigInteger(b.bigint))},p.extend(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object),KJUR.asn1.DERBitString=function(b){KJUR.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(b){this.hTLV=null,this.isModified=!0,this.hV=b},this.setUnusedBitsAndHexValue=function(c,a){if(0>c||7<c)throw"unused bits shall be from 0 to 7: u = "+c;this.hTLV=null,this.isModified=!0,this.hV="0"+c+a},this.setByBinaryString=function(g){g=g.replace(/0+$/,"");var h=8-g.length%8;8==h&&(h=0);for(var i=0;h>=i;i++)g+="0";for(var j="",i=0;i<g.length-1;i+=8){var k=g.substr(i,8),e=parseInt(k,2).toString(16);1==e.length&&(e="0"+e),j+=e}this.hTLV=null,this.isModified=!0,this.hV="0"+h+j},this.setByBooleanArray=function(d){for(var a="",e=0;e<d.length;e++)a+=1==d[e]?"1":"0";this.setByBinaryString(a)},this.newFalseArray=function(d){for(var a=Array(d),b=0;d>b;b++)a[b]=!1;return a},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof b&&("undefined"==typeof b.hex?"undefined"==typeof b.bin?"undefined"!=typeof b.array&&this.setByBooleanArray(b.array):this.setByBinaryString(b.bin):this.setHexValueIncludingUnusedBits(b.hex))},p.extend(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object),KJUR.asn1.DEROctetString=function(b){KJUR.asn1.DEROctetString.superclass.constructor.call(this,b),this.hT="04"},p.extend(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},p.extend(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object),KJUR.asn1.DERObjectIdentifier=function(d){var j=function(c){var a=c.toString(16);return 1==a.length&&(a="0"+a),a},a=function(b){var a="",k=new u(b,10),d=k.toString(2),l=7-d.length%7;7==l&&(l=0);for(var m="",n=0;l>n;n++)m+="0";d=m+d;for(var o,n=0;n<d.length-1;n+=7)o=d.substr(n,7),n!=d.length-7&&(o="1"+o),a+=j(parseInt(o,2));return a};KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(b){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=b},this.setValueOidString=function(b){if(!b.match(/^[0-9.]+$/))throw"malformed oid string: "+b;var c="",h=b.split("."),e=40*parseInt(h[0])+parseInt(h[1]);c+=j(e),h.splice(0,2);for(var f=0;f<h.length;f++)c+=a(h[f]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=c},this.setValueName=function(c){if("undefined"==typeof KJUR.asn1.x509.OID.name2oidList[c])throw"DERObjectIdentifier oidName undefined: "+c;var a=KJUR.asn1.x509.OID.name2oidList[c];this.setValueOidString(a)},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof d&&("undefined"==typeof d.oid?"undefined"==typeof d.hex?"undefined"!=typeof d.name&&this.setValueName(d.name):this.setValueHex(d.hex):this.setValueOidString(d.oid))},p.extend(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.DERUTF8String=function(b){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,b),this.hT="0c"},p.extend(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNumericString=function(b){KJUR.asn1.DERNumericString.superclass.constructor.call(this,b),this.hT="12"},p.extend(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERPrintableString=function(b){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,b),this.hT="13"},p.extend(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERTeletexString=function(b){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,b),this.hT="14"},p.extend(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERIA5String=function(b){KJUR.asn1.DERIA5String.superclass.constructor.call(this,b),this.hT="16"},p.extend(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERUTCTime=function(b){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,b),this.hT="17",this.setByDate=function(b){this.hTLV=null,this.isModified=!0,this.date=b,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},"undefined"!=typeof b&&("undefined"==typeof b.str?"undefined"==typeof b.hex?"undefined"!=typeof b.date&&this.setByDate(b.date):this.setStringHex(b.hex):this.setString(b.str))},p.extend(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERGeneralizedTime=function(b){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,b),this.hT="18",this.setByDate=function(b){this.hTLV=null,this.isModified=!0,this.date=b,this.s=this.formatDate(this.date,"gen"),this.hV=stohex(this.s)},"undefined"!=typeof b&&("undefined"==typeof b.str?"undefined"==typeof b.hex?"undefined"!=typeof b.date&&this.setByDate(b.date):this.setStringHex(b.hex):this.setString(b.str))},p.extend(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERSequence=function(b){KJUR.asn1.DERSequence.superclass.constructor.call(this,b),this.hT="30",this.getFreshValueHex=function(){for(var d,e="",f=0;f<this.asn1Array.length;f++)d=this.asn1Array[f],e+=d.getEncodedHex();return this.hV=e,this.hV}},p.extend(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERSet=function(b){KJUR.asn1.DERSet.superclass.constructor.call(this,b),this.hT="31",this.getFreshValueHex=function(){for(var d,e=[],a=0;a<this.asn1Array.length;a++)d=this.asn1Array[a],e.push(d.getEncodedHex());return e.sort(),this.hV=e.join(""),this.hV}},p.extend(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERTaggedObject=function(b){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(d,a,b){this.hT=a,this.isExplicit=d,this.asn1Object=b,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=b.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,a),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof b&&("undefined"!=typeof b.tag&&(this.hT=b.tag),"undefined"!=typeof b.explicit&&(this.isExplicit=b.explicit),"undefined"!=typeof b.obj&&(this.asn1Object=b.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},p.extend(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object),function(f){"use strict";var a,d={};d.decode=function(b){var c;if(a===f){var k="0123456789ABCDEF";for(a=[],c=0;16>c;++c)a[k.charAt(c)]=c;for(k=k.toLowerCase(),c=10;16>c;++c)a[k.charAt(c)]=c;for(c=0;c<" \f\n\r\t\xA0\u2028\u2029".length;++c)a[" \f\n\r\t\xA0\u2028\u2029".charAt(c)]=-1}var l=[],g=0,m=0;for(c=0;c<b.length;++c){var n=b.charAt(c);if("="==n)break;if(n=a[n],-1!=n){if(n===f)throw"Illegal character at offset "+c;g|=n,2<=++m?(l[l.length]=g,g=0,m=0):g<<=4}}if(m)throw"Hex encoding incomplete: 4 bits missing";return l},window.Hex=d}(),function(e){"use strict";var a,d={};d.decode=function(b){var c;if(a===e){for(a=[],c=0;64>c;++c)a["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c)]=c;for(c=0;c<"= \f\n\r\t\xA0\u2028\u2029".length;++c)a["= \f\n\r\t\xA0\u2028\u2029".charAt(c)]=-1}var f=[],g=0,k=0;for(c=0;c<b.length;++c){var l=b.charAt(c);if("="==l)break;if(l=a[l],-1!=l){if(l===e)throw"Illegal character at offset "+c;g|=l,4<=++k?(f[f.length]=g>>16,f[f.length]=255&g>>8,f[f.length]=255&g,g=0,k=0):g<<=6}}switch(k){case 1:throw"Base64 encoding incomplete: at least 2 bits missing";case 2:f[f.length]=g>>10;break;case 3:f[f.length]=g>>16,f[f.length]=255&g>>8;}return f},d.re=/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,d.unarmor=function(c){var e=d.re.exec(c);if(e)if(e[1])c=e[1];else{if(!e[2])throw"RegExp out of sync";c=e[2]}return d.decode(c)},window.Base64=d}(),function(i){"use strict";var a=Math.abs;function l(b,a){b instanceof l?(this.enc=b.enc,this.pos=b.pos):(this.enc=b,this.pos=a)}function b(f,a,b,c,d){this.stream=f,this.header=a,this.length=b,this.tag=c,this.sub=d}var m={tag:function(d,a){var b=document.createElement(d);return b.className=a,b},text:function(b){return document.createTextNode(b)}};l.prototype.get=function(a){if(a===i&&(a=this.pos++),a>=this.enc.length)throw"Requesting byte offset "+a+" on a stream of length "+this.enc.length;return this.enc[a]},l.prototype.hexDigits="0123456789ABCDEF",l.prototype.hexByte=function(b){return this.hexDigits.charAt(15&b>>4)+this.hexDigits.charAt(15&b)},l.prototype.hexDump=function(f,a,b){for(var c="",g=f;a>g;++g)if(c+=this.hexByte(this.get(g)),!0!==b)switch(15&g){case 7:c+="  ";break;case 15:c+="\n";break;default:c+=" ";}return c},l.prototype.parseStringISO=function(e,a){for(var b="",f=e;a>f;++f)b+=Y(this.get(f));return b},l.prototype.parseStringUTF=function(f,a){for(var b,g="",h=f;a>h;)b=this.get(h++),g+=Y(128>b?b:191<b&&224>b?(31&b)<<6|63&this.get(h++):(15&b)<<12|(63&this.get(h++))<<6|63&this.get(h++));return g},l.prototype.parseStringBMP=function(g,a){for(var b="",h=g;a>h;h+=2){var i=this.get(h),e=this.get(h+1);b+=Y((i<<8)+e)}return b},l.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,l.prototype.parseTime=function(e,a){var b=this.parseStringISO(e,a),f=this.reTime.exec(b);return f?(b=f[1]+"-"+f[2]+"-"+f[3]+" "+f[4],f[5]&&(b+=":"+f[5],f[6]&&(b+=":"+f[6],f[7]&&(b+="."+f[7]))),f[8]&&(b+=" UTC","Z"!=f[8]&&(b+=f[8],f[9]&&(b+=":"+f[9]))),b):"Unrecognized time: "+b},l.prototype.parseInteger=function(g,a){var b=a-g;if(4<b){b<<=3;var h=this.get(g);if(0===h)b-=8;else for(;128>h;)h<<=1,--b;return"("+b+" bit)"}for(var i=0,j=g;a>j;++j)i=i<<8|this.get(j);return i},l.prototype.parseBitString=function(j,a){var b=this.get(j),c=(a-j-1<<3)-b,d="("+c+" bit)";if(20>=c){var k=b;d+=" ";for(var l=a-1;l>j;--l){for(var m=this.get(l),h=k;8>h;++h)d+=1&m>>h?"1":"0";k=0}}return d},l.prototype.parseOctetString=function(d,a){var e=a-d,c="("+e+" byte) ";e>100&&(a=d+100);for(var h=d;a>h;++h)c+=this.hexByte(this.get(h));return e>100&&(c+="\u2026"),c},l.prototype.parseOID=function(i,a){for(var b,j="",k=0,l=0,m=i;a>m;++m)if(b=this.get(m),k=k<<7|127&b,l+=7,!(128&b)){if(""===j){var n=80>k?40>k?0:1:2;j=n+"."+(k-40*n)}else j+="."+(31<=l?"bigint":k);k=l=0}return j},b.prototype.typeName=function(){if(this.tag===i)return"unknown";var a=this.tag>>6,b=(1&this.tag>>5,31&this.tag);return 0==a?0===b?"EOC":1===b?"BOOLEAN":2===b?"INTEGER":3===b?"BIT_STRING":4===b?"OCTET_STRING":5===b?"NULL":6===b?"OBJECT_IDENTIFIER":7===b?"ObjectDescriptor":8===b?"EXTERNAL":9===b?"REAL":10===b?"ENUMERATED":11===b?"EMBEDDED_PDV":12===b?"UTF8String":16===b?"SEQUENCE":17===b?"SET":18===b?"NumericString":19===b?"PrintableString":20===b?"TeletexString":21===b?"VideotexString":22===b?"IA5String":23===b?"UTCTime":24===b?"GeneralizedTime":25===b?"GraphicString":26===b?"VisibleString":27===b?"GeneralString":28===b?"UniversalString":30===b?"BMPString":"Universal_"+b.toString(16):1===a?"Application_"+b.toString(16):2===a?"["+b+"]":3===a?"Private_"+b.toString(16):void 0},b.prototype.reSeemsASCII=/^[ -~]+$/,b.prototype.content=function(){if(this.tag===i)return null;var d=this.tag>>6,b=31&this.tag,c=this.posContent(),e=a(this.length);if(0!=d){if(null!==this.sub)return"("+this.sub.length+" elem)";var f=this.stream.parseStringISO(c,c+$(e,100));return this.reSeemsASCII.test(f)?f.substring(0,200)+(f.length>200?"\u2026":""):this.stream.parseOctetString(c,c+e)}return 1==b?0===this.stream.get(c)?"false":"true":2===b?this.stream.parseInteger(c,c+e):3===b?this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(c,c+e):4===b?this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(c,c+e):6===b?this.stream.parseOID(c,c+e):16===b||17===b?"("+this.sub.length+" elem)":12===b?this.stream.parseStringUTF(c,c+e):18===b||19===b||20===b||21===b||22===b||26===b?this.stream.parseStringISO(c,c+e):30===b?this.stream.parseStringBMP(c,c+e):23===b||24===b?this.stream.parseTime(c,c+e):null},b.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},b.prototype.print=function(a){if(a===i&&(a=""),document.writeln(a+this),null!==this.sub){a+="  ";for(var e=0,f=this.sub.length;f>e;++e)this.sub[e].print(a)}},b.prototype.toPrettyString=function(a){a===i&&(a="");var f=a+this.typeName()+" @"+this.stream.pos;if(0<=this.length&&(f+="+"),f+=this.length,32&this.tag?f+=" (constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(f+=" (encapsulates)"),f+="\n",null!==this.sub){a+="  ";for(var g=0,h=this.sub.length;h>g;++g)f+=this.sub[g].toPrettyString(a)}return f},b.prototype.toDOM=function(){var f=m.tag("div","node");f.asn1=this;var a=m.tag("div","head"),b=this.typeName().replace(/_/g," ");a.innerHTML=b;var l=this.content();if(null!==l){l=(l+"").replace(/</g,"&lt;");var n=m.tag("span","preview");n.appendChild(m.text(l)),a.appendChild(n)}f.appendChild(a),this.node=f,this.head=a;var e=m.tag("div","value");if(b="Offset: "+this.stream.pos+"<br/>",b+="Length: "+this.header+"+",b+=0<=this.length?this.length:-this.length+" (undefined)",32&this.tag?b+="<br/>(constructed)":3!=this.tag&&4!=this.tag||null===this.sub||(b+="<br/>(encapsulates)"),null!==l&&(b+="<br/>Value:<br/><b>"+l+"</b>","object"==typeof oids&&6==this.tag)){var g=oids[l];g&&(g.d&&(b+="<br/>"+g.d),g.c&&(b+="<br/>"+g.c),g.w&&(b+="<br/>(warning!)"))}e.innerHTML=b,f.appendChild(e);var h=m.tag("div","sub");if(null!==this.sub)for(var i=0,o=this.sub.length;o>i;++i)h.appendChild(this.sub[i].toDOM());return f.appendChild(h),a.onclick=function(){f.className="node collapsed"==f.className?"node":"node collapsed"},f},b.prototype.posStart=function(){return this.stream.pos},b.prototype.posContent=function(){return this.stream.pos+this.header},b.prototype.posEnd=function(){return this.stream.pos+this.header+a(this.length)},b.prototype.fakeHover=function(b){this.node.className+=" hover",b&&(this.head.className+=" hover")},b.prototype.fakeOut=function(c){var a=/ ?hover/;this.node.className=this.node.className.replace(a,""),c&&(this.head.className=this.head.className.replace(a,""))},b.prototype.toHexDOM_sub=function(f,a,b,c,d){if(!(c>=d)){var e=m.tag("span",a);e.appendChild(m.text(b.hexDump(c,d))),f.appendChild(e)}},b.prototype.toHexDOM=function(f){var a=m.tag("span","hex");if(f===i&&(f=a),this.head.hexNode=a,this.head.onmouseover=function(){this.hexNode.className="hexCurrent"},this.head.onmouseout=function(){this.hexNode.className="hex"},a.asn1=this,a.onmouseover=function(){var b=!f.selected;b&&(f.selected=this.asn1,this.className="hexCurrent"),this.asn1.fakeHover(b)},a.onmouseout=function(){var b=f.selected==this.asn1;this.asn1.fakeOut(b),b&&(f.selected=null,this.className="hex")},this.toHexDOM_sub(a,"tag",this.stream,this.posStart(),this.posStart()+1),this.toHexDOM_sub(a,0<=this.length?"dlen":"ulen",this.stream,this.posStart()+1,this.posContent()),null===this.sub)a.appendChild(m.text(this.stream.hexDump(this.posContent(),this.posEnd())));else if(0<this.sub.length){var c=this.sub[0],d=this.sub[this.sub.length-1];this.toHexDOM_sub(a,"intro",this.stream,this.posContent(),c.posStart());for(var e=0,j=this.sub.length;j>e;++e)a.appendChild(this.sub[e].toHexDOM(f));this.toHexDOM_sub(a,"outro",this.stream,d.posEnd(),this.posEnd())}return a},b.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},b.decodeLength=function(e){var a=e.get(),f=127&a;if(f==a)return f;if(3<f)throw"Length over 24 bits not supported at position "+(e.pos-1);if(0==f)return-1;a=0;for(var c=0;f>c;++c)a=a<<8|e.get();return a},b.hasContent=function(c,a,d){if(32&c)return!0;if(3>c||4<c)return!1;var e=new l(d);3==c&&e.get();var f=e.get();if(1&f>>6)return!1;try{var g=b.decodeLength(e);return e.pos-d.pos+g==a}catch(a){return!1}},b.decode=function(c){c instanceof l||(c=new l(c,0));var m=new l(c),d=c.get(),e=b.decodeLength(c),n=c.pos-m.pos,g=null;if(b.hasContent(d,e,c)){var o=c.pos;if(3==d&&c.get(),g=[],0<=e){for(var i=o+e;c.pos<i;)g[g.length]=b.decode(c);if(c.pos!=i)throw"Content size is not correct for container starting at offset "+o}else try{for(;;){var j=b.decode(c);if(0===j.tag)break;g[g.length]=j}e=o-c.pos}catch(a){throw"Exception while decoding undefined length content: "+a}}else c.pos+=e;return new b(m,n,e,d,g)},b.test=function(){for(var c=[{value:[39],expected:39},{value:[129,201],expected:201},{value:[131,254,220,186],expected:16702650}],a=0,h=c.length;h>a;++a){var e=new l(c[a].value,0),f=b.decodeLength(e);f!=c[a].expected&&document.write("In test["+a+"] expected "+c[a].expected+" got "+f+"\n")}},window.ASN1=b}(),ASN1.prototype.getHexStringValue=function(){var d=this.toHexString(),a=2*this.header,b=2*this.length;return d.substr(a,b)},U.prototype.parseKey=function(d){try{var a=0,o=0,p=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(d)?Hex.decode(d):Base64.unarmor(d),e=ASN1.decode(p);if(9===e.sub.length){a=e.sub[1].getHexStringValue(),this.n=S(a,16),o=e.sub[2].getHexStringValue(),this.e=parseInt(o,16);var f=e.sub[3].getHexStringValue();this.d=S(f,16);var g=e.sub[4].getHexStringValue();this.p=S(g,16);var h=e.sub[5].getHexStringValue();this.q=S(h,16);var i=e.sub[6].getHexStringValue();this.dmp1=S(i,16);var j=e.sub[7].getHexStringValue();this.dmq1=S(j,16);var k=e.sub[8].getHexStringValue();this.coeff=S(k,16)}else{if(2!==e.sub.length)return!1;var l=e.sub[1],m=l.sub[0];a=m.sub[0].getHexStringValue(),this.n=S(a,16),o=m.sub[1].getHexStringValue(),this.e=parseInt(o,16)}return!0}catch(a){return!1}},U.prototype.getPrivateBaseKey=function(){var c={array:[new KJUR.asn1.DERInteger({int:0}),new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({int:this.e}),new KJUR.asn1.DERInteger({bigint:this.d}),new KJUR.asn1.DERInteger({bigint:this.p}),new KJUR.asn1.DERInteger({bigint:this.q}),new KJUR.asn1.DERInteger({bigint:this.dmp1}),new KJUR.asn1.DERInteger({bigint:this.dmq1}),new KJUR.asn1.DERInteger({bigint:this.coeff})]},a=new KJUR.asn1.DERSequence(c);return a.getEncodedHex()},U.prototype.getPrivateBaseKeyB64=function(){return W(this.getPrivateBaseKey())},U.prototype.getPublicBaseKey=function(){var f={array:[new KJUR.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.1.1"}),new KJUR.asn1.DERNull]},g=new KJUR.asn1.DERSequence(f);f={array:[new KJUR.asn1.DERInteger({bigint:this.n}),new KJUR.asn1.DERInteger({int:this.e})]};var b=new KJUR.asn1.DERSequence(f);f={hex:"00"+b.getEncodedHex()};var c=new KJUR.asn1.DERBitString(f);f={array:[g,c]};var d=new KJUR.asn1.DERSequence(f);return d.getEncodedHex()},U.prototype.getPublicBaseKeyB64=function(){return W(this.getPublicBaseKey())},U.prototype.wordwrap=function(d,a){if(a=a||64,!d)return d;var e="(.{1,"+a+"})( +|$\n?)|(.{1,"+a+"})";return d.match(RegExp(e,"g")).join("\n")},U.prototype.getPrivateKey=function(){var b="-----BEGIN RSA PRIVATE KEY-----\n";return b+=this.wordwrap(this.getPrivateBaseKeyB64())+"\n",b+="-----END RSA PRIVATE KEY-----"},U.prototype.getPublicKey=function(){var b="-----BEGIN PUBLIC KEY-----\n";return b+=this.wordwrap(this.getPublicBaseKeyB64())+"\n",b+="-----END PUBLIC KEY-----"},U.prototype.hasPublicKeyProperty=function(b){return b=b||{},b.hasOwnProperty("n")&&b.hasOwnProperty("e")},U.prototype.hasPrivateKeyProperty=function(b){return b=b||{},b.hasOwnProperty("n")&&b.hasOwnProperty("e")&&b.hasOwnProperty("d")&&b.hasOwnProperty("p")&&b.hasOwnProperty("q")&&b.hasOwnProperty("dmp1")&&b.hasOwnProperty("dmq1")&&b.hasOwnProperty("coeff")},U.prototype.parsePropertiesFrom=function(b){this.n=b.n,this.e=b.e,b.hasOwnProperty("d")&&(this.d=b.d,this.p=b.p,this.q=b.q,this.dmp1=b.dmp1,this.dmq1=b.dmq1,this.coeff=b.coeff)};var z=function(b){U.call(this),b&&("string"==typeof b?this.parseKey(b):(this.hasPrivateKeyProperty(b)||this.hasPublicKeyProperty(b))&&this.parsePropertiesFrom(b))};z.prototype=new U,z.prototype.constructor=z;var L=function(b){b=b||{},this.default_key_size=parseInt(b.default_key_size)||1024,this.default_public_exponent=b.default_public_exponent||"010001",this.log=b.log||!1,this.key=null};L.prototype.setKey=function(b){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new z(b)},L.prototype.setPrivateKey=function(b){this.setKey(b)},L.prototype.setPublicKey=function(b){this.setKey(b)},L.prototype.decrypt=function(b){try{return this.getKey().decrypt(X(b))}catch(a){return!1}},L.prototype.encrypt=function(b){try{return W(this.getKey().encrypt(b))}catch(a){return!1}},L.prototype.getKey=function(b){if(!this.key){if(this.key=new z,b&&"[object Function]"==={}.toString.call(b))return void this.key.generateAsync(this.default_key_size,this.default_public_exponent,b);this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key},L.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()},L.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()},L.prototype.getPublicKey=function(){return this.getKey().getPublicKey()},L.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()},a.JSEncrypt=L})(JSEncryptExports);var JSEncrypt=JSEncryptExports.JSEncrypt;if(null==window.bstr)var bstr={langcode:"zh-s",login:"\u767B\u5F55",logoff:"\u9000\u51FA",book:"\u4E66\u7C4D",blog:"\u535A\u5BA2",about:"\u5173\u4E8E",contact:"\u8054\u7CFB",signup:"\u6CE8\u518C",bbs:"bbs",faq:"faq",intro:"\u7B80\u4ECB",dir:"\u76EE\u5F55(\u542B\u6837\u7AE0)",correction:"\u52D8\u8BEF",source:"\u6E90\u7801",ref:"\u53C2\u8003\u8D44\u6599",email:"\u90AE\u4EF6",password:"\u5BC6\u7801",login_through:"\u6216\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u767B\u5F55",comment:"\u8BC4\u8BBA",inputverify:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",newtopic:"\u65B0\u5EFA\u8BDD\u9898",prev:"\u4E0A\u4E00\u9875",next:"\u4E0B\u4E00\u9875",topic:"\u4E3B\u9898",topics:"\u7BC7",reply:"\u56DE\u590D",total:"\u5171",chat:"\u804A\u5929"};(function(a){function b(a){var b=new Date(a),c=b.toLocaleString();return c}a.user={uid:-1};class c extends React.Component{constructor(...a){super(...a),this.state={focused:this.props.focused||0},this.clicked=a=>{this.props.handleClick(a),this.setState({focused:a})},this.toggle=()=>{var a=this.refs.menuitems.getDOMNode(),b=this.refs.toggleButton.getDOMNode();"none"===a.style.display?(a.style.display="block",b.innerHTML="- "):(a.style.display="none",b.innerHTML="+ ")}}componentDidMount(){var a=this.props.defaultItem||0;-1!=a&&a<this.props.items.length&&this.clicked(a)}componentDidUpdate(a){if(a!==this.props){var b=this;setTimeout(function(){b.clicked(0)},0)}}render(){var a=this;if(null!=this.props.title)var b=React.createElement("dt",{className:"menutitle "},React.createElement("strong",null,React.createElement("div",{ref:"toggleButton",className:"toggleButton",onClick:this.toggle},"- ")),this.props.title);return React.createElement("div",null,b,React.createElement("dl",{ref:"menuitems"},this.props.items.map(function(b,c){var d="menu ";return a.state.focused==c&&(d+="focused"),React.createElement("dd",{className:d,onClick:a.clicked.bind(a,c)},b)})))}}class d extends React.Component{constructor(...a){super(...a),this.state={data:null},this.clicked=()=>{var a=this.refs.replybody.getDOMNode().value,b=$(this.refs.verify.getDOMNode()).find(".vcode")[0].value,c=$(this.refs.verify.getDOMNode()).find(".vid")[0].value,d=this;$.post("/review/new",{tid:this.props.tid,body:a,vcode:{qid:c,qa:b}},function(a){null!=a&&!1==a.error&&(d.refs.replybody.getDOMNode().value="",d.refresh(d.props))})}}componentWillReceiveProps(a){this.refresh(a)}refresh(a){$.post("/reveiw/list",{tid:a.tid},function(a){this.setState({data:a})}.bind(this))}componentDidMount(){this.refresh(this.props)}componentDidUpdate(){}render(){var a=this,c=[],d="";return null!=this.state.data&&(null!=this.state.data.comments&&this.state.data.comments.forEach(function(a){var d=b(a.date);c.push(React.createElement("div",{className:"review"},React.createElement("xmp",{className:"bbscode"},a.body),React.createElement("div",{className:"userinfo"},React.createElement("font",{className:"username"},a.name)," [",d,"] ")))}),d=React.createElement("div",{className:"newreplydiv fullwidth"},React.createElement("textarea",{className:"fullwidth",ref:"replybody",name:"body",rows:"6"}),React.createElement(e,{ref:"verify",myqaid:this.state.data.vcode.qid,Qstr:this.state.data.vcode.qa}),React.createElement("input",{type:"button",className:"button fullwidth btn btn-primary",value:bstr.comment,onClick:this.clicked}))),React.createElement("div",null,c,d)}}class e extends React.Component{constructor(...a){super(...a),this.state={qid:this.props.myqaid,qstr:this.props.Qstr},this.handleBlur=()=>{var a=this.state.qid,b=ReactDOM.findDOMNode(this.refs.vcode).value,c=ReactDOM.findDOMNode(this.refs.vprompt),d=ReactDOM.findDOMNode(this.refs.vprompt2);$.get("/verifycode",{qid:a,qa:b},function(a){var b="",e="";null!=a&&!0==a.pass?(VerifyCode=!0,b="&#10003",c.className="correct",c.style.color="#00ff00"):(c.className="wrong",c.style.color="#ff0000",b="X",e="\u8BF7\u91CD\u65B0\u8F93\u5165\u9A8C\u8BC1\u7801"),c.innerHTML=b,d.innerHTML=e})},this.handleFocus=()=>{var a=ReactDOM.findDOMNode(this.refs.vcode);"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801"==a.value&&(a.value="")}}componentDidMount(){null==this.state.qid&&$.post("verifyrequest",function(a){null==a||null==a.vcode||this.setState({qid:a.vcode.qid,qstr:a.vcode.qa})}.bind(this))}componentWillReceiveProps(a){var b=ReactDOM.findDOMNode(this.refs.vcode),c=ReactDOM.findDOMNode(this.refs.vprompt),d=ReactDOM.findDOMNode(this.refs.vprompt2);if(b.value="",c.innerHTML="",d.innerHTML="",null!=a.myqaid){var e=this;setTimeout(function(){e.setState({qid:a.myqaid,qstr:a.Qstr})},0)}}render(){return React.createElement("div",{className:"verifydiv"},React.createElement("input",{type:"hidden",ref:"vid",className:"vid",id:"vid",name:"vid",value:this.state.qid}),React.createElement("table",{width:"100%"},React.createElement("tr",null," ",React.createElement("td",{align:"left",className:"vquestion"},React.createElement("span",{ref:"vquestion",id:"vquestion",className:"vquestion"}," ",this.state.qstr))),React.createElement("tr",{className:"emptyMargin"},React.createElement("td",{className:"emptyMargin"},React.createElement("input",{type:"text",ref:"vcode",className:"vcode",cols:"15",onBlur:this.handleBlur,onFocus:this.handleFocus,placeholder:bstr.inputverify}),React.createElement("span",{ref:"vprompt"}))),React.createElement("tr",null," ",React.createElement("td",null,React.createElement("span",{ref:"vprompt2"})))))}}class f extends React.Component{render(){return React.createElement("iframe",{style:{height:"100%",width:"100%"},src:this.props.src})}}class g extends React.Component{constructor(...a){super(...a),this.clicked=a=>{ReactDOM.render(React.createElement(f,{src:this.props.targets[a].src}),$("#html_body")[0]),ReactDOM.render(React.createElement(d,{tid:this.props.targets[a].tid}),$("#html_right")[0])}}render(){return React.createElement(c,{items:this.props.items,handleClick:this.clicked,title:this.props.title,defaultItem:this.props.defaultItem})}}class h extends React.Component{render(){this;return React.createElement("div",null,this.props.items.map(function(a,b){var c=0==b?0:-1;return React.createElement(g,{items:a.items,targets:a.targets,defaultItem:c,title:a.title})}))}}a.Uefi={MenuBase:c,MenuIframes:g,Menu2Level:h,ReviewBase:d,Verify:e,TID:{main:0,bbs:108,faq:107,bookintro:109,bookindex:110,booksource:111,bookcorrection:112,bookref:113},routes:{}},window.onhashchange=function(){$("div.navigation .focusing").removeClass("focusing");var a=window.location.hash.substr(1);if(a!=null){var b=a.indexOf("?");-1!=b&&(a=a.substr(0,b));var c=a.indexOf("/",1);-1!=c&&(a=a.substr(0,c))}
""===a?Uefi.routes["/book"]():window.Uefi.routes.hasOwnProperty(a)&&Uefi.routes[a]()
}})(window),function(){class a extends React.Component{render(){this;return React.createElement("div",{className:"center2d"},React.createElement("div",null,React.createElement("a",{href:"mailto:djx.zhenghua@gmail.com"},React.createElement("img",{src:"/image/gmail.png"})),": djx.zhenghua@gmail.com"),React.createElement("br",null),React.createElement("div",null,React.createElement("a",{href:"https://ca.linkedin.com/in/zhenghuadai"},React.createElement("img",{src:"/image/linkedin.gif"})),"https://ca.linkedin.com/in/zhenghuadai"))}}$(function(){Uefi.routes["/about"]=function(){ReactDOM.render(React.createElement(a,null),$("#html_body")[0])}})}(window),function(a){function b(a){var b=new Date(a),c=b.toLocaleString();return c}function c(a){return $(ReactDOM.findDOMNode(a))}function e(a,b=2e3){var c=0;return function(){var d=new Date().getTime();d-c>b&&(a.apply(this,arguments),c=d)}}class f extends React.Component{constructor(...a){super(...a),this.state={liked:!1},this.handleClick=()=>{this.setState({liked:!this.state.liked})}}render(){var a=this.state.liked?"like":"haven't liked";return React.createElement("p",{onClick:e(this.handleClick)},"You ",a," this. Click to toggle.")}}var g=a.Uefi.Verify;class h extends React.Component{constructor(...a){super(...a),this.handleReply=()=>{var a=ReactDOM.findDOMNode(this.refs.replybody).value,b=this.props.tid,d=this;if(""==a)return void(c(this.refs.vmsg)[0].innerHTML="\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A");var e=c(this.refs.verify).find(".vcode")[0].value;$.post("/uefibbs/reply",{tid:b,body:a,vcode:{qid:d.props.vcode.qid,qa:e}},function(a){null==a.error||!1==a.error?(d.props.refresh(),ReactDOM.findDOMNode(d.refs.replybody).value=""):ReactDOM.findDOMNode(this.refs.emsg).innerHTML="\u670D\u52A1\u5668\u5FD9"})}}render(){return React.createElement("div",{className:"newreplydiv"},React.createElement("table",null,React.createElement("tr",null,React.createElement("td",null,React.createElement("textarea",{ref:"replybody",name:"body",cols:"80",rows:"6"}))),React.createElement("tr",null,React.createElement("td",null,React.createElement(g,{ref:"verify",myqaid:this.props.vcode.qid,Qstr:this.props.vcode.qa}))),React.createElement("tr",null,React.createElement("td",{align:"left"},React.createElement("input",{className:"button fullwidth btn btn-primary",type:"button",value:bstr.reply,onClick:e(this.handleReply)})))),React.createElement("div",{ref:"vmsg"}))}}class i extends React.Component{constructor(...a){super(...a),this.state={start:"",data:void 0},this.refresh=()=>{$.get("/uefibbs?cmd=at&tid="+this.props.tid,function(a){this.setState({start:0,data:a})}.bind(this))}}getInitialState(){return{start:"",data:void 0}}componentDidMount(){this.refresh()}handleSolution(a,b){var c=this;$.post("/uefibbs/setsolution",{tid:a,rid:b},function(a){null!=a&&!1==a.error&&c.refresh()})}render(){var c=[],d=React.createElement("div",null," "),f=this,g={qid:0,qa:"11 * 11 = ?"};if(null!=this.state.data){var i=this.state.data.topic;g=this.state.data.vcode;var j=this.state.data.rid,k="title";null==j&&(k="pendingtitle");var l=b(i.date);d=React.createElement("div",null,React.createElement("div",{className:k},React.createElement("strong",null,i.title)," [\u9605\u8BFB\u6B21\u6570 ",this.props.numreads,"]"),React.createElement("div",{className:"lou1"},React.createElement("div",{className:"userinfo"},React.createElement("font",{className:"username"},this.props.name)," [",l,"] "),React.createElement("xmp",{className:"bbscode"},i.body))),null!=this.state.data&&this.state.data.hasOwnProperty("replies")&&this.state.data.replies.forEach(function(a){var d="",g="reply";user.uid==i.userid&&(d=React.createElement("a",{href:"javascript:void(0)",onClick:e(f.handleSolution.bind(f,f.props.tid,a.rid))}," [Mark as Solution]")),a.rid==j&&(g=" reply solution");var h=b(a.date);c.push(React.createElement("div",{className:g},React.createElement("div",{className:"userinfo"}," ",React.createElement("span",{className:"username"},a.name)," [",h,"]",d),React.createElement("xmp",{className:"bbscode"},a.body)))})}var m="";return 0<a.user.uid&&(m=React.createElement(h,{tid:f.props.tid,refresh:this.refresh,vcode:g})),React.createElement("div",null,d,c,m)}}class j extends React.Component{constructor(...b){super(...b),this.verifiedCode={},this.commit=()=>{var b=this,d=ReactDOM.findDOMNode(this.refs.commit);$(d).prop("disabled",!0);var e=ReactDOM.findDOMNode(this.refs.title).value,f=ReactDOM.findDOMNode(this.refs.body).value,g=$(ReactDOM.findDOMNode(this.refs.verify)).find(".correct"),h=this.refs.verify.refs.vcode.value;return 0==g.length?void $(d).removeAttr("disabled"):""==e||""==f?(c(this.refs.emsg)[0].innerHTML="\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",void $(d).removeAttr("disabled")):void $.post("/uefibbs/newtopic",{title:e,body:f,vcode:{qid:this.props.vcode.qid,qa:h}},function(c){0<c.tid?ReactDOM.render(React.createElement(i,{tid:c.tid,name:a.user.name,numreads:"0"}),$("#html_body")[0]):(ReactDOM.findDOMNode(b.refs.emsg).innerHTML="\u670D\u52A1\u5668\u5FD9",$("#elementID").removeAttr("disabled"))})}}render(){return React.createElement("div",{id:"divuiadd"},React.createElement("input",{className:"fullwidth",ref:"title",type:"text",name:"title",placeholder:"\u4E3B\u9898"}),React.createElement("textarea",{className:"fullwidth",ID:"body",ref:"body",cols:"87",rows:"20"}),React.createElement(g,{ref:"verify",myqaid:this.props.vcode.qid,Qstr:this.props.vcode.qa}),React.createElement("input",{className:"button fullwidth btn btn-primary",ref:"commit",type:"button",value:"\u63D0\u4EA4",onClick:e(this.commit)}),React.createElement("div",{ref:"emsg"}))}}class k extends React.Component{constructor(...a){super(...a),this.handleClick=()=>{ReactDOM.render(React.createElement(i,{tid:this.props.tid,name:this.props.name,numreads:this.props.numreads}),$("#html_body")[0])}}render(){var a=this.props._date.indexOf("T"),b=this.props._date.substring(0,a);return React.createElement("tr",{className:"topicitem"},React.createElement("td",{width:"60%"},React.createElement("a",{href:"javascript:void(0)",value:this.props.tid,onClick:e(this.handleClick)},"  ",this.props.title,"  "),"  "),React.createElement("td",{width:"45px",align:"center"},React.createElement("div",{className:"topicauthor"},this.props.name),React.createElement("div",{className:"topicdate"},b)),React.createElement("td",{width:"20%",align:"right"}),React.createElement("td",{width:"10%",align:"right"},this.props.numreads,"/",this.props.numreplies))}}class l extends React.Component{constructor(...b){super(...b),this.totalTopics=-1,this.page=0,this.state={start:"",data:void 0},this.refresh=()=>{var a=this;$.get("/uefibbs",{page:a.page,total:a.totalTopics},function(a){null!=a.total&&(this.totalTopics=a.total,this.page=1),this.setState({start:0,data:a})}.bind(this))},this.onNewTopic=()=>{null==a.user.uid||0>=a.user.uid?$("#nav_login").click():ReactDOM.render(React.createElement(j,{vcode:this.state.data.vcode}),$("#html_body")[0])},this.onPre=()=>{1<this.page&&(--this.page,this.refresh())},this.onNext=()=>{this.page<this.totalTopics/20&&(++this.page,this.refresh())}}getInitialState(){return{start:"",data:void 0}}componentDidMount(){this.refresh()}render(){var a=[];return null!=this.state.data&&this.state.data.hasOwnProperty("topics")&&this.state.data.topics.forEach(function(b){a.push(React.createElement(k,{tid:b.tid,title:b.title,name:b.name,_date:b.date,numreads:b.ref,numreplies:b.replies}))}),React.createElement("div",null,React.createElement("table",{width:"100%"},React.createElement("tr",null,React.createElement("td",{width:"40%"}," ",React.createElement("a",{href:"javascript:void(0)",onClick:e(this.onNewTopic)},React.createElement("font",{class:"newtopic"},"+",bstr.newtopic))),React.createElement("td",{width:"60%",align:"right"},"Search",React.createElement("input",{type:"text"}))," ")," "),React.createElement("table",{width:"100%"},React.createElement("tr",{className:"topicheader"},React.createElement("td",{width:"60%"}," \u4E3B\u9898"),React.createElement("td",{width:"10%",align:"center"},"\u4F5C\u8005"),React.createElement("td",{width:"20%",align:"right"}),React.createElement("td",{width:"10%",align:"right"},"\u9605\u8BFB/\u56DE\u590D")),a),React.createElement("div",null," [",React.createElement("a",{href:"javascript:void(0)",onClick:e(this.onPre)},bstr.prev),"] [",React.createElement("a",{href:"javascript:void(0)",onClick:this.onNext},bstr.next),"]",bstr.total," ",this.totalTopics," ",bstr.topics))}}class m extends React.Component{constructor(...a){super(...a),this.state={start:"",data:void 0}}getInitialState(){return{start:"",data:void 0}}handleTopic(a){ReactDOM.render(React.createElement(i,{tid:a,name:"",numreads:"0"}),$("#html_body")[0])}componentDidMount(){$.get("/uefibbs/faq",function(a){this.setState({start:0,data:a})}.bind(this))}render(){var a=this,b=[];return null!=this.state.data&&this.state.data.hasOwnProperty("solutions")&&this.state.data.solutions.forEach(function(c){b.push(React.createElement("div",{className:"faq"},React.createElement("div",{className:"title"},React.createElement("a",{href:"javascript:void(0)",onClick:e(a.handleTopic.bind(a,c.tid))},"\u67E5\u770B\u539F\u5E16")," ",c.title),React.createElement("div",{className:"question"},"            ",React.createElement("xmp",{className:"bbscode"},c.Q),"           "),React.createElement("div",{className:"solution"},"            ",React.createElement("xmp",{className:"bbscode"},c.S),"           ")))}),React.createElement("table",{width:"100%"},b)}}class n extends React.Component{render(){return React.createElement("div",null,React.createElement("a",{href:"#"}," is the book"))}}var o=a.Uefi.MenuBase,p=a.Uefi.ReviewBase;class q extends React.Component{constructor(...b){super(...b),this.clicked=b=>{0==b?(ReactDOM.render(React.createElement(l,null),$("#html_body")[0]),ReactDOM.render(React.createElement(p,{tid:a.Uefi.TID.bbs}),$("#html_right")[0])):1==b&&(ReactDOM.render(React.createElement(m,null),$("#html_body")[0]),ReactDOM.render(React.createElement(p,{tid:a.Uefi.TID.faq}),$("#html_right")[0]))}}render(){return React.createElement(o,{items:this.props.items,handleClick:this.clicked})}}$(function(){window.Uefi.routes["/uefi"]=function(){$("#body").css("overflow-y","scroll"),$("div.navigation .focusing").removeClass("focusing"),$("#nav_uefi").addClass("focusing"),ReactDOM.render(React.createElement(q,{items:["BBS","FAQ"]}),$("#html_left")[0])}})}(window),function(a){function b(){a.user.uid=null,a.user.name=null,a.user.email=null,$("#nav_image").addClass("hidden"),$("#nav_name").addClass("hidden"),$("#nav_logoff").addClass("hidden"),$("#nav_login").removeClass("hidden"),$("#nav_name").html()}function c(b){b.hasOwnProperty("uid")&&0<b.uid&&(a.user.uid=b.uid,a.user.name=b.name,a.user.email=b.email,a.user.imageurl=b.imageurl,null!=b.imageurl&&$("#nav_image").attr("src",b.imageurl),$("#nav_login").addClass("hidden"),$("#nav_image").removeClass("hidden"),$("#nav_name").removeClass("hidden"),$("#nav_name").html(a.user.name))}var d=a.Uefi.MenuBase;class e extends React.Component{constructor(...b){super(...b),this.clicked=b=>{if(0==b)ReactDOM.render(React.createElement(h,null),$("#html_body")[0]);else if(1==b)ReactDOM.render(React.createElement(g,null),$("#html_body")[0]);else if(2==b){var c=new JSEncrypt;c.setPublicKey(a.srvkey);var d=c.encrypt("Awesome password \u60A8\u597D");$.post("/account/ssl",{data:d},function(){})}}}render(){return React.createElement(d,{items:this.props.items,handleClick:this.clicked})}}var f=a.Uefi.Verify;class g extends React.Component{constructor(...b){super(...b),this.handleCheckUser=()=>{var a=this,b=React.findDOMNode(this.refs.user_email).value;null==b||3>b.length||0>=b.indexOf("@")||$.post("/account/exists",{email:b},function(b){a.refs.umsg.getDOMNode().innerHTML=b.hasOwnProperty("err")&&!1==b.err?"":"\u90AE\u7BB1\u5DF2\u5B58\u5728"})},this.handleSignup=()=>{if(!1!=this.checkpwdI()){var b=React.findDOMNode(this.refs.passwd0).value,d=a.md5(b),e=React.findDOMNode(this.refs.user_email).value,f=React.findDOMNode(this.refs.user_name).value,g=$(this.refs.verify.getDOMNode()).find(".vcode")[0].value,h=$(this.refs.verify.getDOMNode()).find(".vid")[0].value,i=new JSEncrypt;i.setPublicKey(a.srvkey);var j=i.encrypt(JSON.stringify({email:e,name:f,md5:d,vcode:{qid:h,qa:g}}));$.post("/account/signup",{rsadata:j},function(a){c(a),window.onhashchange()})}},this.checkpwd=()=>{this.checkpwdI()}}checkpwdI(){var a=React.findDOMNode(this.refs.passwd0).value,b=React.findDOMNode(this.refs.passwd).value;return a===b?(React.findDOMNode(this.refs.pmsg).innerHTML="",!0):(React.findDOMNode(this.refs.pmsg).innerHTML="\u5BC6\u7801\u4E0D\u5339\u914D",!1)}render(){return React.createElement("div",{id:"signupdiv"},React.createElement("input",{className:"fullwidth",type:"text",name:"user_email",ref:"user_email",placeholder:"email",onBlur:this.handleCheckUser}),React.createElement("div",{ref:"umsg"}),React.createElement("input",{className:"fullwidth",type:"text",ref:"user_name",placeholder:"\u7528\u6237\u540D"}),React.createElement("br",null),React.createElement("input",{className:"fullwidth",type:"password",ref:"passwd0",placeholder:"\u5BC6\u7801"}),React.createElement("br",null),React.createElement("input",{className:"fullwidth",type:"password",ref:"passwd",placeholder:"\u786E\u8BA4\u5BC6\u7801",onBlur:this.checkpwd})," ",React.createElement("span",{ref:"pmsg"}),React.createElement("br",null),React.createElement("input",{className:"hidden fullwidth",type:"text",ref:"reportto",placeholder:"boss"}),React.createElement("br",null),React.createElement(f,{ref:"verify"}),React.createElement("br",null),React.createElement("input",{className:"button fullwidth",type:"button",value:"\u6CE8\u518C",onClick:this.handleSignup}),React.createElement("br",null))}}class h extends React.Component{constructor(...b){super(...b),this.clicked=()=>{var b=React.findDOMNode(this.refs.passwd).value,d=a.md5(b),e=React.findDOMNode(this.refs.user_email).value,f=this,g=new JSEncrypt;g.setPublicKey(a.srvkey);var h=g.encrypt(JSON.stringify({email:e,md5:d}));$.post("/account/login",{rsadata:h},function(a){a.hasOwnProperty("uid")&&0<a.uid?(c(a),window.onhashchange()):f.refs.vmsg.getDOMNode().innerHTML="\u5BC6\u7801\u9519\u8BEF"})},this.onKeydown=a=>{13==a.keyCode&&this.clicked()},this.onGlogin=()=>{auth2.grantOfflineAccess({scope:"https://www.googleapis.com/auth/plus.login  https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/userinfo.email",redirect_uri:"postmessage"}).then(function(a){a.code&&($("#gButton").attr("style","display: none"),$.post("/account/google/token",{code:a.code},function(a){c(a),window.onhashchange()}))})},this.onDou=()=>{var a="https://www.douban.com/service/auth2/auth?client_id=011868827fee6f5e034939877fcb4e1a&redirect_uri=http://www.biosuefi.com/account/douban/token&response_type=code&state="+escape(window.location.href)+"&scope=douban_basic_common";window.open(a,"_self")}}gotoSignup(){ReactDOM.render(React.createElement(g,null),$("#html_body")[0])}componentDidMount(){}render(){return React.createElement("div",{id:"logindiv"},React.createElement("form",null,React.createElement("input",{className:"fullwidth",type:"text",ref:"user_email",size:"32",placeholder:bstr.email}),React.createElement("input",{className:"fullwidth",type:"password",ref:"passwd",size:"32",placeholder:bstr.password,onKeyDown:this.onKeydown}),React.createElement("input",{className:"button fullwidth btn btn-primary",type:"button",value:bstr.login,onClick:this.clicked}),React.createElement("br",null)),React.createElement("br",null),React.createElement("div",{ref:"vmsg",className:"fullwidth error"}),React.createElement("br",null),bstr.login_through,React.createElement("br",null),React.createElement("button",{id:"gButton",className:"vcenter oauthLoginBtn",onClick:this.onGlogin},React.createElement("img",{width:"50",src:"https://www.gstatic.com/images/branding/product/1x/googleg_32dp.png"})))}}$(function(){$("#nav_login")[0].onclick=function(){$("#nav_login").addClass("focusing"),ReactDOM.render(React.createElement(e,{items:[bstr.login,bstr.signup]}),$("#html_left")[0])},$("#nav_name")[0].onclick=function(){$("div.navigation .focusing").removeClass("focusing"),$("#nav_name").addClass("focusing"),$("#nav_logoff").hasClass("hidden")?$("#nav_logoff").removeClass("hidden"):$("#nav_logoff").addClass("hidden")},$("#nav_logoff")[0].onclick=function(){$.post("/account/logoff",function(a){b(a)})},/*$.post("/account/sessretrieve",function(a){c(a)}),$.post("/sslshake/pubkey",function(b){null!=b&&null!=b.key&&(a.srvkey=b.key.toString())})*/$("#leftCtrl").click(function(){var a=$("#html_left_td");a.toggle(),$(this).html("none"==a.css("display")?"&gt;":"&lt;")}),$("#rightCtrl").click(function(){var a=$("#html_right_td");a.toggle(),$(this).html("none"==a.css("display")?"&lt;":"&gt;")})})}(window),function(a){var b=a.Uefi.MenuBase;class c extends React.Component{constructor(...a){super(...a),this.clicked=a=>{}}render(){return React.createElement(b,{items:this.props.items,handleClick:this.clicked})}}$(function(){$("#nav_water")[0].onclick=function(){ReactDOM.render(React.createElement(c,{items:["water"]}),$("#html_left")[0])}})}(window),function(a){var b=a.Uefi.MenuBase,c=a.Uefi.ReviewBase,d=a.Uefi.MenuIframes;$(function(){window.Uefi.routes["/book"]=function(){$("#body").css("overflow-y",""),$("#nav_book").addClass("focusing");var b="/books/book1.index.html";"eng"===bstr.langcode&&(b="/books/eng/book1.index.html"),ReactDOM.render(React.createElement(d,{items:[bstr.intro,bstr.dir,bstr.correction,bstr.source,bstr.ref],targets:[{src:"/books/book1.intro.html",tid:a.Uefi.TID.bookintro},{src:b,tid:a.Uefi.TID.bookindex},{src:"/books/book1.correction.html",tid:a.Uefi.TID.bookcorrection},{src:"/books/book1.source.html",tid:a.Uefi.TID.booksource},{src:"/books/book1.reference.html",tid:a.Uefi.TID.bookref}]}),$("#html_left")[0])}})}(window),function(a){var b=a.Uefi.MenuBase,c=a.Uefi.ReviewBase,d=a.Uefi.MenuIframes,e=a.Uefi.Menu2Level;$(function(){Uefi.routes["/blog"]=function(){$("#nav_blog").addClass("focusing"),$("#body").css("overflow-y",""),
(function(a){
    var b=JSON.parse(a);
    null==a.err&&ReactDOM.render(React.createElement(e,{items:b.menu}),$("#html_left")[0])})({"menu":[{"title":"UEFI","items":[""],"targets":[{"src":"/2015/08/23/reset-vector/", "tid":10001}]}]});
}}),$(function(){})}(window),function(a){var b=a.Uefi.MenuBase,c=a.Uefi.ReviewBase,d=a.Uefi.MenuIframes;$(function(){window.Uefi.routes["/chat"]=function(){$("#chat").css("overflow-y",""),$("#nav_chat").addClass("focusing"),ReactDOM.render(React.createElement(d,{items:[bstr.chat],targets:[{src:"/chat/index.html",tid:a.Uefi.TID.main}]}),$("#html_left")[0])}})}(window);
